{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "..\\..\\spa-admin\\App.svelte",
    "..\\..\\spa-admin\\Enroll.svelte",
    "..\\..\\spa-admin\\Messages.svelte",
    "..\\..\\spa-admin\\Students.svelte",
    "..\\..\\spa-admin\\Teachers.svelte",
    "..\\..\\spa-admin\\Step2.svelte",
    "..\\..\\spa-admin\\Step3.svelte",
    "..\\..\\spa-admin\\Timeslot.svelte",
    "..\\..\\spa-admin\\Calendar.svelte",
    "..\\..\\spa-admin\\Countries.svelte",
    "..\\..\\spa-admin\\Edit.svelte",
    "..\\..\\spa-admin\\Enrollments.svelte",
    "..\\..\\spa-admin\\Profile.svelte",
    "..\\..\\spa-admin\\Profile.svelte"
  ],
  "sourcesContent": [
    "<script>\r\nexport let csrf_token;\r\n\r\nimport Router from 'svelte-spa-router';\r\nimport { link } from 'svelte-spa-router';\r\nimport active from 'svelte-spa-router/active'\r\nimport routes from './routes';\r\n\r\nlet logoutForm;\r\nfunction logout()\r\n{\r\n\tlogoutForm.submit();\r\n}\r\n</script>\r\n\r\n<div class=\"container-fluid\">\r\n\t<div class=\"row mt-3\">\r\n\t\t<div class=\"col-2\">\r\n\t\t\t<h1 class=\"text-center\">ELOSpeak</h1>\r\n\t\t\t<div class=\"nav flex-column nav-pills mt-3 sidenav-bar\">\r\n\t\t\t\t<a href=\"/\" use:link use:active class=\"nav-link\">Overview</a>\r\n\t\t\t\t<a href=\"/messages\" use:link use:active class=\"nav-link\">Messages</a>\r\n\t\t\t\t<a href=\"/teachers\" use:link use:active class=\"nav-link\">Teachers</a>\r\n\t\t\t\t<a href=\"/students\" use:link use:active={'/(student|students|enroll)(|/.+)'} class=\"nav-link\">Students</a>\r\n\t\t\t\t<a href=\"/settings\" use:link use:active={'/settings(|/.+)'} class=\"nav-link\">Settings</a>\r\n\t\t\t\t<a href=\"javascript:;\" on:click=\"{logout}\" class=\"nav-link\">Logout</a>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"col-10\">\r\n\t\t\t<Router {routes} />\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n\r\n<form method=\"POST\" action=\"./logout\" bind:this={logoutForm}>\r\n\t<input type=\"hidden\" name=\"_token\" value={csrf_token} />\r\n</form>\r\n\r\n<style>\r\n\t:global(.required) {\r\n\t\tcolor: #f03;\r\n\t\tfont-weight: bold;\r\n\t}\r\n\t:global(#main) {\r\n\t\tfont-family: 'Nunito', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\r\n\t}\r\n\r\n\t.sidenav-bar {\r\n\t\tfont-size: 1.5rem;\r\n\t}\r\n</style>",
    "<script>\r\nexport let params = {};\r\n\r\nimport axios from 'axios';\r\nimport Breadcrumb from './views/partials/Breadcrumb.svelte';\r\nimport {pop} from 'svelte-spa-router'\r\n\r\nlet student;\r\nasync function fetcherInit()\r\n{\r\n    try {\r\n        const xhr = await axios.get(`./students/${params.id}`, {\r\n            params: {\r\n                with: ['country']\r\n            }\r\n        });\r\n        student = xhr.data;\r\n\r\n        if (student.has_active_enrollment) {\r\n            pop();\r\n        }\r\n    } catch (e) {\r\n        throw e.response.data;\r\n    }\r\n}\r\n\r\nconst init = fetcherInit();\r\n\r\nimport Step1 from './views/enrollment-steps/Step1.svelte';\r\nimport Step2 from './views/enrollment-steps/Step2.svelte';\r\nimport Step3 from './views/enrollment-steps/Step3.svelte';\r\n\r\nconst steps = [\r\n    { step: 1, component: Step1 },\r\n    { step: 2, component: Step2 },\r\n    { step: 3, component: Step3 },\r\n];\r\n\r\nlet path = [], cursor = 0, current = steps[cursor];\r\n\r\n$: if (student) {\r\n    path = [\r\n        'Home',\r\n        { label: 'Students', link: '#/students' },\r\n        { label: student.full_name, link: `#/student/${student.id}` },\r\n        'Enroll'\r\n    ];\r\n}\r\n\r\nlet data = {};\r\n\r\nfunction save(event)\r\n{\r\n    for (let key in event.detail) {\r\n        data[key] = event.detail[key];\r\n    }\r\n\r\n    cursor += 1;\r\n    current = steps[cursor];\r\n}\r\n\r\nfunction back()\r\n{\r\n    cursor -= 1;\r\n    current = steps[cursor];\r\n}\r\n</script>\r\n\r\n{#await init}\r\n    <div class=\"ml-auto mr-auto text-center mt-5\">\r\n        <div class=\"spinner-border\" role=\"status\">\r\n            <span class=\"sr-only\">Loading...</span>\r\n        </div>\r\n    </div>\r\n{:then response}\r\n    <h1>\r\n        <a href=\"#/student/{student.id}\">{student.full_name}</a> &#8212; Enroll : <span class=\"step\">Step {current.step}/{steps.length}</span>\r\n    </h1>\r\n    <hr>\r\n    <Breadcrumb {path}></Breadcrumb>\r\n    <svelte:component this={current.component} on:next={save} {student} {data} on:back={back}></svelte:component>\r\n{:catch error}\r\n    <div class=\"alert alert-warning w-50 ml-auto mr-auto mt-5\">\r\n        Failed retrieving student, please try again.\r\n    </div>\r\n{/await}\r\n\r\n<style>\r\n.step {\r\n    color: #9b9b9b;\r\n}\r\n</style>",
    "<script>\r\nimport _ from 'lodash';\r\nimport axios from 'axios';\r\nimport { slide } from 'svelte/transition';\r\n\r\nconst fetchMessages = axios.get('./customer-messages');\r\n\r\nlet messages = [];\r\nfetchMessages.then((response) => {\r\n    messages = _.map(response.data, (data) => {\r\n        return {\r\n            id: data.id,\r\n            data,\r\n            viewing: false\r\n        }\r\n    });\r\n});\r\n\r\nfunction show(id)\r\n{\r\n    const index = _.findIndex(messages, (m) => {\r\n        return m.id === id;\r\n    });\r\n\r\n    if (index < 0) {\r\n        return;\r\n    }\r\n\r\n    for (let i in messages) {\r\n        if (i == index) {\r\n            continue;\r\n        }\r\n\r\n        messages[i].viewing = false;\r\n    }\r\n\r\n    messages[index].viewing = !messages[index].viewing;\r\n\r\n    if (!messages[index].data.is_read) {\r\n        try {\r\n            const xhrUpdateMessage = axios.post(`./customer-messages/${id}`, {\r\n                _method: 'PUT',\r\n                data: {\r\n                    is_read: true\r\n                }\r\n            });\r\n\r\n            xhrUpdateMessage.then(() => {\r\n                messages[index].data.is_read = true;\r\n            });\r\n        } catch (e) {}\r\n    }\r\n}\r\n</script>\r\n\r\n<h2 class=\"display-4\">Messages</h2>\r\n\r\n<div class=\"alert alert-info\">\r\n    These are messages from \"Contact US\" page\r\n</div>\r\n\r\n<div class=\"messages\">\r\n    {#await fetchMessages}\r\n        <div class=\"text-center mt-5\">\r\n            <div class=\"spinner-border\" role=\"status\">\r\n                <span class=\"sr-only\">Loading...</span>\r\n            </div>\r\n        </div>\r\n    {:then response}\r\n        <div class=\"d-flex message-header\">\r\n            <div class=\"from w-25\">\r\n                Full Name\r\n            </div>\r\n\r\n            <div class=\"email w-25\">\r\n                Email\r\n            </div>\r\n\r\n            <div class=\"date w-25 ml-auto\">\r\n                Date\r\n            </div>\r\n        </div>\r\n        {#each messages as { data, viewing}}\r\n            <div class=\"message\" class:viewing={viewing}>\r\n                <div class=\"preview d-flex\" class:read={data.is_read} class:unread={!data.is_read} on:click={() => { show(data.id) }}>\r\n                    <div class=\"from w-25\">\r\n                        {data.full_name}\r\n                    </div>\r\n                    <div class=\"email w-25\">\r\n                        {data.email}\r\n                    </div>\r\n                    <div class=\"date w-25 ml-auto\">\r\n                        {data.sent_date}\r\n                    </div>\r\n                </div>\r\n\r\n                {#if viewing}\r\n                    <div class=\"content\" transition:slide>\r\n                        <div class=\"info\">\r\n                            <span class=\"h\">Full Name</span>\r\n                            <div class=\"c\">\r\n                                {data.full_name}\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"info\">\r\n                            <span class=\"h\">Email</span>\r\n                            <div class=\"c\">\r\n                                {data.email}\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"info\">\r\n                            <span class=\"h\">Message</span>\r\n                            <div class=\"c\">\r\n                                {data.message}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                {/if}\r\n            </div>\r\n        {/each}\r\n    {:catch}\r\n        <div class=\"alert alert-warning mt-5\">\r\n            Failed fetching messages\r\n        </div>\r\n    {/await}\r\n</div>\r\n\r\n<style>\r\n.messages {\r\n    margin-top: 2rem;\r\n}\r\n\r\n.messages .content .info:not(:last-child) {\r\n    margin-bottom: 1rem;\r\n    border-bottom: 1px solid #f0f0f0;\r\n}\r\n.messages .content .info .h {\r\n    display: block;\r\n    font-weight: bold;\r\n    color: #575757;\r\n}\r\n.messages .content .info .c {\r\n    margin-top: .5rem;\r\n    padding-bottom: 1rem;\r\n}\r\n\r\n.messages .message-header,\r\n.messages .message .unread {\r\n    font-weight: bold;\r\n}\r\n\r\n.messages .message .read {\r\n    color: #666;\r\n}\r\n\r\n.messages .message,\r\n.messages .message-header {\r\n    padding: .5rem;\r\n    font-size: .9rem;\r\n}\r\n\r\n.messages .message-header {\r\n    border-bottom: 1px solid #f0f0f0;\r\n}\r\n\r\n.messages .message:hover,\r\n.messages .message.viewing {\r\n    margin-bottom: .5rem;\r\n    box-shadow: 0 0 0 1px rgba(43, 45, 80, 0.1),\r\n        0 2px 5px 0 rgba(43, 45, 80, 0.08),\r\n        0 1px 1.5px 0 rgba(0, 0, 0, 0.07),\r\n        0 1px 2px 0 rgba(0, 0, 0, 0.08);\r\n    border-radius: .355rem;\r\n}\r\n.messages .message .preview {\r\n    cursor: pointer;\r\n}\r\n.messages .message:not(:last-child) {\r\n    margin-bottom: .5rem;\r\n}\r\n\r\n.messages .message .content {\r\n    border-top: 1px solid #f0f0f0;\r\n    margin-top: .5rem;\r\n    padding-top: .5rem;\r\n}\r\n</style>",
    "<script>\r\nimport _ from 'lodash';\r\nimport {onMount} from 'svelte';\r\nimport axios from 'axios';\r\nimport jq from 'jquery';\r\nimport Pikaday from 'pikaday';\r\n\r\nimport {\r\n    UserPlusIcon,\r\n    UserIcon,\r\n    PhoneIcon,\r\n    HelpCircleIcon\r\n} from 'svelte-feather-icons';\r\n\r\naxios.get('./countries', {\r\n    params: {\r\n        is_defined: true\r\n    }\r\n}).then((resp) => {\r\n    countries = resp.data;\r\n});\r\n\r\nlet isInitiated = false, students = [], filteredStudents = [], countries = [], birthday;\r\n\r\nonMount(async () => {\r\n    try {\r\n        const fetchStudents = await axios.get('./students');\r\n        const fetchCountries = await axios.get('./countries', {\r\n            params: {\r\n                is_defined: true\r\n            }\r\n        });\r\n\r\n        fetchStudents.data.forEach((data) => {\r\n            students = [...students, data];\r\n        });\r\n\r\n        filteredStudents = students;\r\n        countries = fetchCountries.data;\r\n        isInitiated = true;\r\n\r\n        const now = new Date();\r\n        const picker = new Pikaday({\r\n            field: birthday,\r\n            yearRange: [now.getFullYear() - 80, now.getFullYear()]\r\n        });\r\n    } catch (e) {\r\n        // ERROR\r\n    }\r\n\r\n    jq('[data-toggle=\"popover\"]').popover();\r\n});\r\n\r\nlet keywords;\r\nconst searchStudent = _.debounce(async () => {\r\n    if (keywords.length) {\r\n        filteredStudents = students.filter((student) => {\r\n            const regexp = new RegExp(`(${keywords})`, 'i');\r\n\r\n            return regexp.test(student.full_name) \r\n                || regexp.test(student.username) \r\n                || regexp.test(student.email) \r\n                || regexp.test(student.skype);\r\n        });\r\n    } else {\r\n        filteredStudents = students;\r\n    }\r\n}, 700);\r\n\r\nlet addForm, isAddSuccess = false, addErrors = [];\r\n\r\nasync function submitAddForm()\r\n{\r\n    const fields = jq('.t'), fbs = jq('[id^=\"fb-\"');\r\n\r\n    fbs.removeClass('invalid-feedback d-block');\r\n    fbs.addClass('d-none');\r\n\r\n    addErrors = [];\r\n\r\n    const data = new FormData(addForm);\r\n\r\n    fields.prop('disabled', true);\r\n    fields.removeClass('is-invalid');\r\n    try {\r\n        const xhr = await axios.post('./students', data);\r\n\r\n        isAddSuccess = true;\r\n        setTimeout(() => {\r\n            jq('#add-modal').modal('hide');\r\n            top.location.href = `#/student/?id=${xhr.data[0]}`;\r\n        }, 1000);\r\n    } catch (e) {\r\n        if (e.response.status == 422) {\r\n\r\n            _.forEach(e.response.data.errors, (value, key) => {\r\n                const col = key.replace('data.', '');\r\n                const text = value[0].replace(/data\\./g, '');\r\n\r\n                const fb = jq(`#fb-${col}`);\r\n                jq(`#add_${col}`).addClass('is-invalid');\r\n\r\n                fb.addClass('invalid-feedback d-block');\r\n                fb.text(text);\r\n            });\r\n        }\r\n    }\r\n    \r\n\r\n    fields.prop('disabled', false);\r\n}\r\n</script>\r\n\r\n<div class=\"d-flex justify-content-between align-items-center\">\r\n    <div>\r\n        <h2 class=\"display-4\">Students</h2>\r\n    </div>\r\n\r\n    <div>\r\n        <button type=\"button\" class=\"btn btn-secondary btn-lg\" data-toggle=\"modal\" data-target=\"#add-modal\">\r\n            <UserPlusIcon /> Add Student\r\n        </button>\r\n    </div>\r\n</div>\r\n\r\n<div class=\"modal fade\" id=\"add-modal\" data-backdrop=\"static\" tabindex=\"-1\">\r\n    <div class=\"modal-dialog\" role=\"document\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\">Add Student</h5>\r\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\">\r\n                    <span>&times;</span>\r\n                </button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n                <span class=\"text-muted af mb-2\">\r\n                    <span class=\"required\">*</span> Required fields\r\n                </span>\r\n\r\n                {#if isAddSuccess}\r\n                    <div class=\"alert alert-success mb-3\">\r\n                        Successfully created student. Redirecting...\r\n                    </div>\r\n                {/if}\r\n\r\n                <form bind:this={addForm} novalidate on:submit|preventDefault={submitAddForm}>\r\n                    <div class=\"form-row\">\r\n                        <div class=\"form-group col\">\r\n                            <label for=\"add_username\">Username <span class=\"required\">*</span></label>\r\n                            <input type=\"text\" class=\"form-control t\" id=\"add_username\" name=\"data[username]\">\r\n                            <div id=\"fb-username\" class=\"d-none\"></div>\r\n                        </div>\r\n\r\n                        <div class=\"form-group col\">\r\n                            <label for=\"add_email\">Email <span class=\"required\">*</span></label>\r\n                            <input type=\"email\" class=\"form-control t\" id=\"add_email\" name=\"data[email]\">\r\n                            <div id=\"fb-email\" class=\"d-none\"></div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"form-row\">\r\n                        <div class=\"form-group col\">\r\n                            <label for=\"add_password\">Password <span class=\"required\">*</span></label>\r\n                            <input type=\"password\" class=\"form-control t\" id=\"add_password\" name=\"data[password]\">\r\n                            <div id=\"fb-password\" class=\"d-none\"></div>\r\n                        </div>\r\n\r\n                        <div class=\"form-group col\">\r\n                            <label for=\"add_password_repeat\">Repeat Password <span class=\"required\">*</span></label>\r\n                            <input type=\"password\" class=\"form-control t\" id=\"add_password_repeat\" name=\"data[password_repeat]\">\r\n                            <div id=\"fb-password_repeat\" class=\"d-none\"></div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"form-group\">\r\n                        <label for=\"add_full_name\">Full Name <span class=\"required\">*</span></label>\r\n                        <input type=\"text\" class=\"form-control t\" id=\"add_full_name\" name=\"data[full_name]\">\r\n                        <div id=\"fb-full_name\" class=\"d-none\"></div>\r\n                    </div>\r\n\r\n                    <div class=\"form-row\">\r\n                        <div class=\"form-group col\">\r\n                            <label for=\"add_skype\">Skype <span class=\"required\">*</span></label>\r\n                            <input type=\"text\" class=\"form-control t\" id=\"add_skype\" name=\"data[skype]\">\r\n                            <div id=\"fb-skype\" class=\"d-none\"></div>\r\n                        </div>\r\n\r\n                        <div class=\"form-group col\">\r\n                            <label for=\"add_birthday\">Birthday</label>\r\n                            <input type=\"text\" class=\"form-control t\" id=\"add_birthday\" name=\"data[birthday]\" placeholder=\"YYYY-MM-DD\">\r\n                            <div id=\"fb-birthday\" class=\"d-none\"></div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"form-row\">\r\n                        <div class=\"form-group col\">\r\n                            <label for=\"add_personal_contact_number\">Personal Contact Number</label>\r\n                            <input type=\"text\" class=\"form-control t\" id=\"add_personal_contact_number\" name=\"data[personal_contact_number]\">\r\n                            <div id=\"fb-personal_contact_number\" class=\"d-none\"></div>\r\n                        </div>\r\n                        <div class=\"form-group col\">\r\n                            <label for=\"add_country_code\" data-toggle=\"popover\" data-trigger=\"hover\" data-placement=\"right\" data-content=\"Countries that are not listed in this field means that its prices per class, and currency is not yet defined. Go to Settings &raquo; Countries to configure\">\r\n                                Country <span class=\"text-primary\"><HelpCircleIcon /></span> <span class=\"required\">*</span>\r\n                            </label>\r\n                            <select class=\"form-control custom-select t\" id=\"add_country_code\" name=\"data[country_code]\">\r\n                                {#each countries as country}\r\n                                    <option value={country.code}>{country.name}</option>\r\n                                {/each}\r\n                            </select>\r\n                            <div id=\"fb-country_code\" class=\"d-none\"></div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"form-group\">\r\n                        <button type=\"submit\" class=\"btn btn-primary\"><UserPlusIcon /> Add</button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n{#if isInitiated}\r\n    <input type=\"text\" bind:value={keywords} class=\"form-control form-control-lg\" on:keyup={searchStudent} placeholder=\"Search Student\" />\r\n\r\n    <table class=\"table mt-4\">\r\n        <thead class=\"thead-dark\">\r\n            <tr>\r\n                <th>#</th>\r\n                <th>Full Name</th>\r\n                <th>Username</th>\r\n                <th>Skype</th>\r\n                <th></th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            {#each filteredStudents as student}\r\n                <tr>\r\n                    <td>{student.id}</td>\r\n                    <td>\r\n                        <UserIcon />\r\n                        <a href=\"#/student/{student.id}\">\r\n                            {student.full_name}\r\n                        </a>\r\n                    </td>\r\n                    <td>{student.username}</td>\r\n                    <td>\r\n                        <PhoneIcon />\r\n                        <a href=\"skype:{student.skype}?chat\">\r\n                            {student.skype}\r\n                        </a>\r\n                    </td>\r\n                    <td>...</td>\r\n                </tr>\r\n            {/each}\r\n        </tbody>\r\n    </table>\r\n{:else}\r\n    <div class=\"spinner-border\" role=\"status\">\r\n        <span class=\"sr-only\">Loading...</span>\r\n    </div>\r\n{/if}\r\n\r\n<style>\r\n.af {\r\n    font-size: 0.9rem;\r\n    display: block;\r\n}\r\n</style>",
    "<script>\r\nimport _ from 'underscore';\r\nimport {onMount} from 'svelte';\r\nimport axios from 'axios';\r\nimport jq from 'jquery';\r\nimport {\r\n    UserPlusIcon,\r\n    MailIcon,\r\n    PhoneIcon,\r\n    UserIcon,\r\n    UserXIcon\r\n} from 'svelte-feather-icons';\r\n\r\nlet isInitiated = false, teachers = [], filteredTeachers = [];\r\n\r\nonMount(async () => {\r\n    try {\r\n        const xhr = await axios.get('./teachers');\r\n\r\n        xhr.data.forEach((data) => {\r\n            teachers = [...teachers, data];\r\n        });\r\n        \r\n        filteredTeachers = teachers;\r\n\r\n        isInitiated = true;\r\n    } catch (e) {\r\n        // ERROR\r\n    }\r\n});\r\n\r\nlet keywords;\r\nconst searchTeacher = _.debounce(async () => {\r\n    if (keywords.length) {\r\n        filteredTeachers = teachers.filter((teacher) => {\r\n            const regexp = new RegExp(`(${keywords})`, 'i');\r\n\r\n            return regexp.test(teacher.full_name) \r\n                || regexp.test(teacher.username) \r\n                || regexp.test(teacher.email) \r\n                || regexp.test(teacher.skype);\r\n        });\r\n    } else {\r\n        filteredTeachers = teachers;\r\n    }\r\n}, 700);\r\n\r\nlet educationalAttainment = [];\r\nconst eaXHR = axios.get('./teacher/educational-attainment');\r\n\r\neaXHR.then((r) => {\r\n    educationalAttainment = r.data;\r\n});\r\n\r\nlet addErrors = [], addSuccess = false;\r\nasync function submitAddTeacher(evt)\r\n{\r\n    const fields = jq('.t');\r\n    const data = new FormData(evt.target);\r\n\r\n    fields.prop('disabled', true);\r\n    try {\r\n        const xhr = await axios.post('./teachers', data);\r\n\r\n        addErrors = [];\r\n        addSuccess = true;\r\n\r\n        setTimeout(() => {\r\n            jq('#add-modal').modal('hide');\r\n            top.location.href = '#/teacher/?id='+ xhr.data.id;\r\n        }, 1000);\r\n    } catch (e) {\r\n        if (e.response.status == 422) {\r\n            const errors = e.response.data.errors;\r\n\r\n            addErrors = [];\r\n\r\n            fields.removeClass('is-invalid');\r\n\r\n            for (let i in errors) {\r\n                jq(`#teacher-${i}`).addClass('is-invalid');\r\n                addErrors = [...addErrors, errors[i][0]];\r\n            }\r\n        }\r\n    }\r\n\r\n    fields.prop('disabled', false);\r\n    \r\n    return false;\r\n}\r\n\r\nlet tmp = {}, removeSuccess = false;\r\nfunction showConfirmRemove(teacher)\r\n{\r\n    tmp = teacher;\r\n    jq('#remove-modal').modal('show');\r\n}\r\n\r\nasync function removeTeacher(id)\r\n{\r\n    try {\r\n        const xhr = await axios.post(`./teachers/${id}`, {\r\n            _method: 'DELETE'\r\n        });\r\n\r\n        removeSuccess = true;\r\n\r\n        setTimeout(() => {\r\n            top.location.reload();\r\n        }, 1000);\r\n    } catch (e) {\r\n        // ERROR\r\n        alert('Error: Unable to delete teacher');\r\n    }\r\n}\r\n</script>\r\n<div class=\"d-flex justify-content-between align-items-center\">\r\n    <div>\r\n        <h2 class=\"display-4\">Teachers</h2>\r\n    </div>\r\n\r\n    <div>\r\n        <button type=\"button\" class=\"btn btn-secondary btn-lg\" data-toggle=\"modal\" data-target=\"#add-modal\">\r\n            <UserPlusIcon /> Add Teacher\r\n        </button>\r\n    </div>\r\n</div>\r\n\r\n{#if isInitiated}\r\n    <input type=\"text\" bind:value={keywords} class=\"form-control form-control-lg\" on:keyup={searchTeacher} placeholder=\"Search Teacher\" />\r\n\r\n    <table class=\"table mt-4\">\r\n        <thead class=\"thead-dark\">\r\n            <tr>\r\n                <th>#</th>\r\n                <th>Full Name</th>\r\n                <th>Username</th>\r\n                <th>Skype</th>\r\n                <th>Email</th>\r\n                <th></th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            {#each filteredTeachers as teacher}\r\n                <tr>\r\n                    <td>{teacher.id}</td>\r\n                    <td>\r\n                        <UserIcon />\r\n                        <a href=\"#/teacher/{teacher.id}\">\r\n                            {teacher.full_name}\r\n                        </a>\r\n                    </td>\r\n                    <td>\r\n                        {teacher.username}\r\n                    </td>\r\n                    <td>\r\n                        <PhoneIcon />\r\n                        <a href=\"skype:{teacher.skype}?chat\">\r\n                            {teacher.skype}\r\n                        </a>\r\n                    </td>\r\n                    <td>\r\n                        <MailIcon />\r\n                        <a href=\"mailto:{teacher.email}\">\r\n                            {teacher.email}\r\n                        </a>\r\n                    </td>\r\n                    <td>\r\n                        <button class=\"btn btn-secondary\" on:click|preventDefault={() => {showConfirmRemove(teacher)}}><UserXIcon /> Remove</button>\r\n                    </td>\r\n                </tr>\r\n            {/each}\r\n        </tbody>\r\n    </table>\r\n{:else}\r\n    <div class=\"spinner-border\" role=\"status\">\r\n        <span class=\"sr-only\">Loading...</span>\r\n    </div>\r\n{/if}\r\n<div class=\"modal fade\" id=\"remove-modal\" data-backdrop=\"static\">\r\n    <div class=\"modal-dialog\" role=\"document\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\">Remove teacher</h5>\r\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\">\r\n                    <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n                {#if removeSuccess}\r\n                    <div class=\"alert alert-success\">\r\n                        Successfully deleted teacher. Refreshing list...\r\n                    </div>\r\n                {/if}\r\n                You are about to remove teacher <mark>{tmp.full_name}</mark>. Are you sure you want to continue with this?\r\n            </div>\r\n            <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">No</button>\r\n                <button type=\"button\" class=\"btn btn-danger\" on:click|preventDefault={removeTeacher(tmp.id)}>Yes, continue</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div class=\"modal fade\" id=\"add-modal\" data-backdrop=\"static\">\r\n    <div class=\"modal-dialog\" role=\"document\">\r\n        <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\">Add New Teacher</h5>\r\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\">\r\n                    <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n                <span class=\"text-muted af mb-2\">\r\n                    <span class=\"required\">*</span> Required fields\r\n                </span>\r\n\r\n                {#if addErrors.length > 0}\r\n                    <div class=\"alert alert-danger\">\r\n                        <ul>\r\n                            {#each addErrors as error}\r\n                                <li>{error}</li>\r\n                            {/each}\r\n                        </ul>\r\n                    </div>\r\n                {/if}\r\n\r\n                {#if addSuccess}\r\n                    <div class=\"alert alert-success\">\r\n                        Successfully added teacher. Redirecting to teacher's page...\r\n                    </div>\r\n                {/if}\r\n\r\n                <form novalidate on:submit|preventDefault={submitAddTeacher}>\r\n                    <div class=\"form-group\">\r\n                        <label for=\"teacher-username\">Username <span class=\"required\">*</span></label>\r\n                        <input type=\"text\" class=\"form-control t\" id=\"teacher-username\" name=\"data[username]\">\r\n                    </div>\r\n\r\n                    <div class=\"form-group\">\r\n                        <label for=\"teacher-email\">Email <span class=\"required\">*</span></label>\r\n                        <input type=\"email\" class=\"form-control t\" id=\"teacher-email\" name=\"data[email]\">\r\n                    </div>\r\n\r\n                    <div class=\"d-flex mb-2\">\r\n                        <div class=\"w-auto mr-2\">\r\n                            <label for=\"teacher-password\">Password <span class=\"required\">*</span></label>\r\n                            <input type=\"password\" class=\"form-control t\" id=\"teacher-password\" name=\"data[password]\">\r\n                        </div>\r\n\r\n                        <div class=\"w-auto\">\r\n                            <label for=\"teacher-password_repeat\">Password Repeat<span class=\"required\">*</span></label>\r\n                            <input type=\"password\" class=\"form-control t\" id=\"teacher-password_repeat\" name=\"data[password_repeat]\">\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"form-group\">\r\n                        <label for=\"teacher-full_name\">Full Name <span class=\"required\">*</span></label>\r\n                        <input type=\"text\" class=\"form-control t\" id=\"teacher-full_name\" name=\"data[full_name]\">\r\n                    </div>\r\n                    \r\n                    <div class=\"d-flex mb-2\">\r\n                        <div class=\"w-auto mr-2\">\r\n                            <label for=\"teacher-skype\">Skype <span class=\"required\">*</span></label>\r\n                            <input type=\"text\" class=\"form-control t\" id=\"teacher-skype\" name=\"data[skype]\">\r\n                        </div>\r\n\r\n                        <div class=\"w-auto\">\r\n                            <label for=\"teacher-educational_attainment\">Educational Attainment <span class=\"required\">*</span></label>\r\n                            <select class=\"custom-select t\" id=\"teacher-educational_attainment\" name=\"data[educational_attainment]\">\r\n                                {#each educationalAttainment as ea}\r\n                                    <option value={ ea[0] }>{ ea[1] }</option>\r\n                                {/each}\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"d-flex mb-3\">\r\n                        <div class=\"w-auto mr-2\">\r\n                            <label for=\"teacher-salary\">Weekday Salary (per class) <span class=\"required\">*</span></label>\r\n                            <input type=\"text\" class=\"form-control t\" id=\"teacher-salary\" name=\"data[salary]\">\r\n                        </div>\r\n\r\n                        <div class=\"w-auto\">\r\n                            <label for=\"teacher-salary\">Weekend Salary (per class) <span class=\"required\">*</span></label>\r\n                            <input type=\"text\" class=\"form-control t\" id=\"teacher-salary\" name=\"data[salary_weekend]\">\r\n                        </div>\r\n                    </div>\r\n\r\n                    <button type=\"submit\" class=\"btn btn-success t\">Add</button>\r\n                    <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<style>\r\n.af {\r\n    font-size: 0.9rem;\r\n    display: block;\r\n}\r\n</style>",
    "<script>\r\nexport let student;\r\nexport let data;\r\n\r\nimport _ from 'lodash';\r\nimport Timeslot from './Timeslot.svelte';\r\nimport { createEventDispatcher } from 'svelte';\r\n\r\nconst dispatch = createEventDispatcher();\r\nconst dayKeys = ['sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat'];\r\n\r\nlet timeslots = _.has(data, 'timeslots') ? data.timeslots : {};\r\n\r\nif (!_.has(data, 'timeslots')) {\r\n    dayKeys.forEach((day) => {\r\n        timeslots[day] = [];\r\n    });\r\n}\r\n\r\nfunction handleAddSlot(event)\r\n{\r\n    timeslots[event.detail.day].push({\r\n        start: event.detail.slot.start,\r\n        end: event.detail.slot.end\r\n    });\r\n\r\n    timeslots[event.detail.day] = timeslots[event.detail.day];\r\n}\r\n\r\nfunction handleRemoveSlot(event)\r\n{\r\n    const day = event.detail.day;\r\n    const index = event.detail.index;\r\n\r\n    timeslots[day].splice(index, 1);\r\n    timeslots[day] = timeslots[day];\r\n}\r\n\r\nfunction next()\r\n{\r\n    const keys = _.keys(timeslots);\r\n    let allEmpty = true;\r\n\r\n    for (let i in keys) {\r\n        let day = keys[i];\r\n\r\n        if (timeslots[day].length > 0) {\r\n            allEmpty = false;\r\n            break;\r\n        }\r\n    }\r\n\r\n    if (!allEmpty) {\r\n        dispatch('next', {\r\n            timeslots\r\n        });\r\n    }\r\n}\r\n\r\nfunction back()\r\n{\r\n    dispatch('back', true);\r\n}\r\n</script>\r\n<h1 class=\"display-4\" style=\"font-size: 2rem;\">Timeslots</h1>\r\n<div class=\"alert alert-info\">\r\n    <strong>Instructions</strong>: Add timeslots for each day. This will be used in filling up classrooms within the enrollment period selected on the previous step\r\n</div>\r\n<div class=\"days d-flex justify-content-center\">\r\n    <div class=\"weekend\">SUN</div>\r\n    <div>MON</div>\r\n    <div>TUE</div>\r\n    <div>WED</div>\r\n    <div>THU</div>\r\n    <div>FRI</div>\r\n    <div class=\"weekend\">SAT</div>\r\n</div>\r\n\r\n<div class=\"timeslots d-flex justify-content-center\">\r\n    {#each dayKeys as day}\r\n        <Timeslot {day} slots={timeslots[day]} duration={student.country.duration} on:addSlot={handleAddSlot} on:removeSlot={handleRemoveSlot}></Timeslot>\r\n    {/each}\r\n</div>\r\n<hr>\r\n<button class=\"btn btn-secondary\" on:click|preventDefault={back}>&laquo; Back</button>\r\n<button class=\"btn btn-primary\" on:click|preventDefault={next}>Next &raquo;</button>\r\n\r\n<style>\r\n.days {\r\n    border-top: 1px solid #ccc;\r\n    border-bottom: 1px solid #ccc;\r\n}\r\n.days div {\r\n    width: 100%;\r\n    padding: 1rem 0;\r\n    text-align: center;\r\n    font-size: 1.2rem;\r\n}\r\n.days div:not(:last-child) {\r\n    border-right: 1px solid #ccc;\r\n}\r\n.days .weekend {\r\n    color: #f03;\r\n    font-weight: bold;\r\n}\r\n</style>",
    "<script>\r\nexport let student;\r\nexport let data;\r\n\r\nimport _ from 'lodash';\r\nimport axios from 'axios';\r\nimport {onMount, createEventDispatcher} from 'svelte';\r\n\r\nimport { lz } from 'util';\r\n\r\nconst dispatch = createEventDispatcher();\r\n\r\nlet classes;\r\n\r\nonMount(() => {\r\n    classes = calculateClasses(new Date(data.period.start), new Date(data.period.end), data.timeslots);\r\n});\r\n\r\nfunction calculateClasses(start, end, slots)\r\n{\r\n    const days = ['sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat'];\r\n\r\n    let weekdays_qty = 0,\r\n        weekends_qty = 0,\r\n        classes_total = 0,\r\n        amount_total = 0,\r\n        weekdays_total = 0,\r\n        weekends_total = 0,\r\n        items = [];\r\n\r\n    for (let current = start; current <= end; current.setDate(current.getDate() + 1)) {\r\n        const isWeekend = current.getDay() == 0 || current.getDay() == 6;\r\n        const isWeekday = !isWeekend;\r\n        const day = days[current.getDay()];\r\n\r\n        let dayItems = [];\r\n\r\n        _.forEach(slots[day], (slot) => {\r\n            if (isWeekday) {\r\n                weekdays_qty++;\r\n            }\r\n\r\n            if (isWeekend) {\r\n                weekends_qty++;\r\n            }\r\n\r\n            classes_total++;\r\n\r\n            const start = [lz(slot.start.hour), lz(slot.start.minute)].join(':'),\r\n                end = [lz(slot.end.hour), lz(slot.end.minute)].join(':');\r\n\r\n            dayItems.push({\r\n                start,\r\n                end,\r\n                price: isWeekday ? student.country.price : student.country.price_weekend\r\n            });\r\n        });\r\n\r\n        if (dayItems.length) {\r\n            items.push({\r\n                date: [current.getFullYear(), lz(current.getMonth() + 1), lz(current.getDate())].join('-'),\r\n                slots: dayItems\r\n            });\r\n        }\r\n    }\r\n\r\n    weekdays_total = weekdays_qty * student.country.price;\r\n    weekends_total = weekends_qty * student.country.price_weekend;\r\n    amount_total = weekdays_total + weekends_total;\r\n\r\n    return {\r\n        classes: {\r\n            items,\r\n            total: classes_total\r\n        },\r\n\r\n        amount: {\r\n            total: amount_total,\r\n            weekdays: {\r\n                qty: weekdays_qty,\r\n                total: weekdays_total\r\n            },\r\n            weekends: {\r\n                qty: weekends_qty,\r\n                total: weekends_total\r\n            }\r\n        }\r\n    };\r\n}\r\n\r\nlet isSaving = false, procMessage = [];\r\n\r\nasync function enroll()\r\n{\r\n    procMessage = [];\r\n    isSaving = true;\r\n\r\n    procMessage = ['alert alert-info', 'Preparing enrollment data...'];\r\n\r\n    let dates = [];\r\n    _.forEach(classes.classes.items, (item) => {\r\n        _.forEach(item.slots, (slot) => {\r\n            dates.push({\r\n                start: `${item.date} ${slot.start}`,\r\n                end: `${item.date} ${slot.end}`\r\n            });\r\n        });\r\n    });\r\n\r\n    try {\r\n        procMessage = ['alert alert-info', 'Processing enrollment...'];\r\n        const procEnrollment = await axios.post('./enrollments', {\r\n            data: {\r\n                dates,\r\n                student_id: student.id,\r\n                start: data.period.start,\r\n                end: data.period.end\r\n            }\r\n        });\r\n\r\n        procMessage = ['alert alert-success', `Successfully created an enrollment. <a href=\"#/student/${student.id}/enrollments/\"><strong>View Enrollments</strong></a> or <a href=\"./enrollment/pdf/${procEnrollment.data.id}\"><strong>Download Invoice (PDF)</strong></a>`];\r\n    } catch (e) {\r\n        let responseMessage = e.message;\r\n\r\n        if (e.isAxiosError) {\r\n            responseMessage = `HTTP ERROR ${e.response.status} ${e.response.statusText}`;\r\n        }\r\n\r\n        procMessage = ['alert alert-danger', `An error occured: ${responseMessage}.`];\r\n    } finally {\r\n        isSaving = false;\r\n    }\r\n}\r\n\r\nfunction back()\r\n{\r\n    dispatch('back', true);\r\n}\r\n\r\n</script>\r\n\r\n<h1 class=\"display-4\" style=\"font-size: 2rem;\">Preview Enrollment</h1>\r\n<hr>\r\n<div class=\"d-flex\">\r\n    <div class=\"w-50 mr-3\">\r\n        <div>\r\n            <h4>Enrollment Period</h4>\r\n            <div class=\"row ml-5\">\r\n                <div class=\"col\">\r\n                    <strong>Start:</strong>\r\n                </div>\r\n                <div class=\"col\">\r\n                    {data.period.start}\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"row ml-5\">\r\n                <div class=\"col\">\r\n                    <strong>End:</strong>\r\n                </div>\r\n                <div class=\"col\">\r\n                    {data.period.end}\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"mt-5\">\r\n            <h4>Price</h4>\r\n            <div class=\"row ml-5\">\r\n                <div class=\"col\">\r\n                    <strong>Country</strong>\r\n                </div>\r\n                <div class=\"col\">\r\n                    {student.country.name} ({student.country.code})\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"row ml-5\">\r\n                <div class=\"col\">\r\n                    <strong>Currency</strong>\r\n                </div>\r\n                <div class=\"col\">\r\n                    {student.country.currency_code}\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"row ml-5\">\r\n                <div class=\"col\">\r\n                    <strong>Price/class (Weekday)</strong>\r\n                </div>\r\n                <div class=\"col\">\r\n                    {student.country.price}\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"row ml-5\">\r\n                <div class=\"col\">\r\n                    <strong>Price/class (Weekend)</strong>\r\n                </div>\r\n                <div class=\"col\">\r\n                    {student.country.price_weekend}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"w-50\">\r\n        {#if _.isObject(classes)}\r\n            <h4>Amount</h4>\r\n\r\n            <div class=\"row ml-5\">\r\n                <div class=\"col\">\r\n                    <strong>Total # classes</strong>\r\n                </div>\r\n                <div class=\"col\">\r\n                    {classes.classes.total}\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"row ml-5\">\r\n                <div class=\"col\">\r\n                    <span class=\"text-muted ml-5\"># weekday classes</span>\r\n                </div>\r\n                <div class=\"col\">\r\n                    {classes.amount.weekdays.qty} = {student.country.currency_code} {classes.amount.weekdays.total}\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"row ml-5\">\r\n                <div class=\"col\">\r\n                    <span class=\"text-muted ml-5\"># weekend classes</span>\r\n                </div>\r\n                <div class=\"col\">\r\n                    {classes.amount.weekends.qty} = {student.country.currency_code} {classes.amount.weekends.total}\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"row total\">\r\n                <div class=\"col text-right\">\r\n                    <strong style=\"font-size: 1.5rem;\">Total</strong>\r\n                </div>\r\n                <div class=\"col\">\r\n                    <span class=\"total-amount\">\r\n                        {student.country.currency_code} {classes.amount.total}\r\n                    </span>\r\n                </div>\r\n            </div>\r\n\r\n            <div>\r\n                <button class=\"btn btn-secondary\" on:click|preventDefault={back} disabled={isSaving}>&laquo; Back</button>\r\n\r\n                {#if isSaving}\r\n                    <button class=\"btn btn-primary\" type=\"button\" disabled>\r\n                        <span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n                        Loading...\r\n                    </button>\r\n                {:else}\r\n                    <button class=\"btn btn-primary\" on:click|preventDefault={enroll}>Enroll &amp; Create Invoice &raquo;</button>\r\n                {/if}\r\n            </div>\r\n\r\n            <div class=\"mt-5\">\r\n                {#if procMessage.length}\r\n                    <div class=\"{procMessage[0]}\">\r\n                        {@html procMessage[1]}\r\n                    </div>\r\n                {/if}\r\n            </div>\r\n        {/if}\r\n    </div>\r\n</div>\r\n\r\n{#if _.isObject(classes)}\r\n    <h4 class=\"mt-5\">Classroom Schedule</h4>\r\n    <table class=\"table\">\r\n        <tbody>\r\n            {#each classes.classes.items as item}\r\n                <tr>\r\n                    <td>\r\n                        <span class=\"item-date\">{item.date}</span>\r\n\r\n                        <div class=\"ml-5 mt-1\">\r\n                            {#each item.slots as slot}\r\n                                <div class=\"row w-25\">\r\n                                    <div class=\"col\">{slot.start} <span class=\"text-muted\">&#8212;</span> {slot.end}</div>\r\n                                    <div class=\"col\">{student.country.currency_code} {slot.price}</div>\r\n                                </div>\r\n                            {/each}\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n            {/each}\r\n        </tbody>\r\n    </table>\r\n{/if}\r\n<style>\r\n.item-date {\r\n    display: block;\r\n    font-size: 1.5rem;\r\n}\r\n.total {\r\n    border-top: 1px solid #ccc;\r\n    margin-top: 1rem;\r\n    margin-left: 3rem;\r\n    padding-top: 1rem;\r\n}\r\n.total-amount {\r\n    font-size: 2rem;\r\n    text-decoration: underline;\r\n}\r\n</style>",
    "<script>\r\nexport let day;\r\nexport let slots;\r\nexport let duration;\r\n\r\nimport {\r\n    ChevronUpIcon,\r\n    ChevronDownIcon,\r\n    CheckIcon,\r\n    XIcon\r\n} from 'svelte-feather-icons';\r\n\r\nimport { createEventDispatcher } from 'svelte';\r\n\r\nimport { Settings } from 'settings';\r\nimport { lz } from 'util';\r\n\r\nconst dispatch = createEventDispatcher();\r\n\r\nlet showSlot = false, hour, minute = 0;\r\n\r\nlet cfgDuration = duration, cfgStart, cfgEnd;\r\n\r\n$: if ($Settings !== null) {\r\n    cfgStart = parseInt($Settings.CLASSROOM.start_hour);\r\n    cfgEnd = parseInt($Settings.CLASSROOM.end_hour);\r\n\r\n    hour = cfgStart;\r\n}\r\n\r\nfunction remove(index)\r\n{\r\n    dispatch('removeSlot', {\r\n        day,\r\n        index\r\n    });\r\n}\r\n\r\nfunction save()\r\n{\r\n    const end = calculateEndTime();\r\n    const start = {hour, minute};\r\n\r\n    let hasConflict = false;\r\n\r\n    for (let i = 0; i < slots.length; i++) {\r\n        let _sStart = new Date();\r\n        _sStart.setHours(slots[i].start.hour);\r\n        _sStart.setMinutes(slots[i].start.minute);\r\n\r\n        let _sEnd = new Date();\r\n        _sEnd.setHours(slots[i].end.hour);\r\n        _sEnd.setMinutes(slots[i].end.minute);\r\n\r\n        let _nStart = new Date();\r\n        _nStart.setHours(start.hour);\r\n        _nStart.setMinutes(start.minute);\r\n\r\n        let _nEnd = new Date();\r\n        _nEnd.setHours(end.hour);\r\n        _nEnd.setMinutes(end.minute);\r\n\r\n        if (_nStart >= _sStart && _nStart <= _sEnd) {\r\n            hasConflict = true;\r\n            break;\r\n        }\r\n\r\n        if (_nEnd >= _sStart && _nEnd <= _sEnd) {\r\n            hasConflict = true;\r\n            break;\r\n        }\r\n    }\r\n\r\n    if (hasConflict) {\r\n        alert('The selected time slot is in conflict with another time slot. Please review');\r\n        return;\r\n    }\r\n\r\n    dispatch('addSlot', {\r\n        day,\r\n        slot: {\r\n            start, end\r\n        }\r\n    });\r\n\r\n    showSlot = false;\r\n    reset();\r\n}\r\n\r\nfunction calculateEndTime()\r\n{\r\n    const sMinutes = (hour * 60) + minute;\r\n    const total = sMinutes + cfgDuration;\r\n\r\n    const eHours = Math.floor(total / 60);\r\n    const eMinutes = total % 60;\r\n\r\n    return {\r\n        hour: eHours,\r\n        minute: eMinutes\r\n    }\r\n}\r\n\r\nfunction close()\r\n{\r\n    showSlot = false;\r\n    reset();\r\n}\r\n\r\nfunction reset()\r\n{\r\n    hour = cfgStart;\r\n    minute = 0;\r\n}\r\n\r\nfunction change(operation, type)\r\n{\r\n    hour = hour || cfgStart;\r\n\r\n    if (hour == cfgEnd && type == 'minute') {\r\n        return;\r\n    }\r\n\r\n    if (operation == 'add') {\r\n        if (type == 'hour') {\r\n            if (hour >= cfgEnd) {\r\n                hour = cfgStart;\r\n                return;\r\n            }\r\n\r\n            hour += 1;\r\n\r\n            if (hour == cfgEnd) {\r\n                minute = 0;\r\n            }\r\n        } else {\r\n            if (minute >= 59) {\r\n                minute = 0;\r\n                return;\r\n            }\r\n\r\n            minute += 1;\r\n        }\r\n    }\r\n\r\n    if (operation == 'sub') {\r\n        if (type == 'hour') {\r\n            if (hour <= cfgStart) {\r\n                minute = 0;\r\n                hour = cfgEnd;\r\n                return;\r\n            }\r\n\r\n            hour -= 1;\r\n        } else {\r\n            if (minute <= 0) {\r\n                minute = 59;\r\n                return;\r\n            }\r\n\r\n            minute -= 1;\r\n        }\r\n    }\r\n}\r\n\r\nfunction toggle()\r\n{\r\n    showSlot = !showSlot;\r\n}\r\n\r\nfunction ft(time)\r\n{\r\n    return `${lz(time.hour)}:${lz(time.minute)}`;\r\n}\r\n</script>\r\n\r\n<div class=\"enroll timeslot\">\r\n    {#if !slots.length}\r\n        <div class=\"empty\">EMPTY</div>\r\n    {:else}\r\n        {#each slots as slot, i}\r\n            <div class=\"slot d-flex align-items-center\">\r\n                <div class=\"w-100 mr-1\">\r\n                    {ft(slot.start)} - {ft(slot.end)}\r\n                </div>\r\n                <div class=\"w-auto pt-1\">\r\n                    <a href=\"javascript:;\" on:click|preventDefault={() => {remove(i)}}>\r\n                        <XIcon />\r\n                    </a>\r\n                </div>\r\n            </div>\r\n        {/each}\r\n    {/if}\r\n\r\n    {#if !showSlot}\r\n        <button class=\"btn btn-primary mt-3\" on:click={toggle}>Add Timeslot</button>\r\n    {:else}\r\n        <div class=\"time-control\">\r\n            <div class=\"text-left\" style=\"font-size: .7rem;\">\r\n                <strong>Start Time</strong>\r\n            </div>\r\n            <div class=\"d-flex justify-content-center align-items-center\">\r\n                <div class=\"w-100 time\">\r\n                    <span class=\"ticker\" on:click={() => {change('add', 'hour')}}>\r\n                        <ChevronUpIcon />\r\n                    </span>\r\n                    <span class=\"number\">\r\n                        {lz(hour)}\r\n                    </span>\r\n                    <span class=\"ticker\" on:click={() => {change('sub', 'hour')}}>\r\n                        <ChevronDownIcon />\r\n                    </span>\r\n                </div>\r\n                <div class=\"w-100 time\">\r\n                    <span class=\"ticker\" on:click={() => {change('add', 'minute')}}>\r\n                        <ChevronUpIcon />\r\n                    </span>\r\n                    <span class=\"number\">\r\n                        {lz(minute)}\r\n                    </span>\r\n                    <span class=\"ticker\" on:click={() => {change('sub', 'minute')}}>\r\n                        <ChevronDownIcon />\r\n                    </span>\r\n                </div>\r\n                <div class=\"w-100\">\r\n                    <a href=\"javascript:;\" on:click|preventDefault={save} class=\"control save\">\r\n                        <CheckIcon />\r\n                    </a>\r\n                </div>\r\n                <div class=\"w-100\">\r\n                    <a href=\"javascript:;\" on:click|preventDefault={close} class=\"control close\">\r\n                        <XIcon />\r\n                    </a>\r\n                </div>\r\n            </div>\r\n            <hr>\r\n            <div class=\"text-left\" style=\"font-size: .8rem;\">\r\n                Only from <em>{lz(cfgStart)}:00</em> to <em>{lz(cfgEnd)}:00</em>\r\n                <br><br>\r\n                <strong>End Time Calculation:</strong><br>\r\n                Duration: {cfgDuration} minutes<br>\r\n                = Start Time + Duration\r\n                <br><br>\r\n                <span class=\"badge badge-pill badge-info\">Note</span> Leave at least 5 minutes after every slot so teachers will have enough time to prepare for their next class\r\n            </div>\r\n        </div>\r\n    {/if}\r\n</div>\r\n\r\n<style>\r\n.time {\r\n    margin-right: 1rem;\r\n}\r\n.time span {\r\n    display: block;\r\n}\r\n.time .ticker {\r\n    cursor: pointer;\r\n    background: rgb(226, 226, 226);\r\n}\r\n.time .ticker:hover {\r\n    color: #fff;\r\n    background: #007bff;\r\n}\r\n.time-control {\r\n    margin-top: 1rem;\r\n    margin-left: 1rem;\r\n    margin-right: 1rem;\r\n    padding: .5rem;\r\n    border: 1px solid #ccc;\r\n    border-radius: .355rem;\r\n}\r\n.time-control .control {\r\n    font-size: 1.5em;\r\n}\r\n\r\n.timeslot {\r\n    width: 100%;\r\n    padding: 1rem 0;\r\n    text-align: center;\r\n}\r\n\r\n.timeslot .empty {\r\n    background: rgb(241, 241, 241);\r\n}\r\n\r\n.timeslot .slot {\r\n    padding: 1rem;\r\n}\r\n\r\n:global(.enroll.timeslot:not(:last-child)) {\r\n    border-right: 1px solid #ccc;\r\n}\r\n</style>",
    "<script>\r\nexport let user;\r\nexport let checkAll = false;\r\nexport let range = [];\r\n\r\nimport jq from 'jquery';\r\nimport _ from 'lodash';\r\nimport axios from 'axios';\r\n\r\nimport { onMount, createEventDispatcher } from 'svelte';\r\nimport { slide } from 'svelte/transition';\r\nimport { date_ymd, date_hm, MONTHS_LONG, is_string_ymd, is_string_hm } from 'util';\r\nimport Pikaday from 'pikaday';\r\n\r\nconst dispatch = createEventDispatcher();\r\n\r\nlet checkboxes = [];\r\n\r\nonMount(() => {\r\n    jq('.calendar').on('change', '.c', function (evt) {\r\n        let self = jq(evt.target);\r\n        if (self.prop('checked')) {\r\n            checkboxes.push(self.data('id'));\r\n        } else {\r\n            checkboxes.splice(checkboxes.indexOf(self.data('id')), 1);\r\n        }\r\n\r\n        checkboxes = checkboxes;\r\n\r\n        dispatch('checkedItems', checkboxes);\r\n    });\r\n\r\n    \r\n});\r\n\r\n$: {\r\n    checkboxes = [];\r\n    jq('.c').prop('checked', checkAll).trigger('change');\r\n}\r\n\r\nconst monthNames = MONTHS_LONG;\r\n\r\nlet start, end, calendar = [], classrooms = {}, fetchStatus = 'none';\r\n\r\n$: {\r\n    start = typeof range[0] == 'string' ? new Date(range[0]) : range[0];\r\n    end = typeof range[1] == 'string' ? new Date(range[1]) : range[1];\r\n\r\n    calendar = createCalendar();\r\n\r\n    fillData();\r\n}\r\n\r\nfunction fillData()\r\n{\r\n    classrooms = {};\r\n    let params = {\r\n        start: date_ymd(start),\r\n        end: date_ymd(end)\r\n    };\r\n\r\n    if (user.user_type == 'student') {\r\n        params['student'] = user.id;\r\n    } else {\r\n        params['teacher'] = user.id\r\n    }\r\n\r\n    params['with'] = ['enrollment', 'teacher'];\r\n\r\n    const fetcher = axios.get('./classrooms', {\r\n        params\r\n    });\r\n\r\n    fetchStatus = 'fetching';\r\n\r\n    fetcher.then(async (resp) => {\r\n        resp.data.forEach((item) => {\r\n            const key = date_ymd(new Date(item.start_raw));\r\n\r\n            if (typeof classrooms[key] == 'undefined') {\r\n                classrooms[key] = [];\r\n            }\r\n\r\n            classrooms[key].push({\r\n                id: item.id,\r\n                data: item,\r\n                start: new Date(item.start_raw),\r\n                end: new Date(item.end_raw),\r\n                visible: false,\r\n                isUpdating: false\r\n            });\r\n        });\r\n\r\n        fetchStatus = 'none';\r\n    });\r\n\r\n    fetcher.catch((error) => {\r\n        fetchStatus = 'error';\r\n    });\r\n}\r\n\r\nfunction createCalendar()\r\n{\r\n    let dates = [];\r\n    for (let month = start.getMonth(); month <= end.getMonth(); month++) {\r\n        let obj = {\r\n            month,\r\n            weeks: []\r\n        };\r\n\r\n        let current = month == start.getMonth() ? start : new Date(start.getFullYear(), month, 1),\r\n            ldom = new Date(current.getFullYear(), month + 1, 0),\r\n            endCompare = month == end.getMonth() ? end : ldom,\r\n            weeks = [], week = createEmptyWeek();\r\n\r\n        while (current <= endCompare) {\r\n            week[current.getDay()] = current;\r\n\r\n            if (current.getDay() == 6) {\r\n                weeks.push(week);\r\n                week = createEmptyWeek();\r\n            }\r\n\r\n            current = new Date(current.getFullYear(), current.getMonth(), current.getDate() + 1);\r\n            \r\n            if (current > ldom || current > end) {\r\n                weeks.push(week);\r\n            }\r\n        }\r\n\r\n        obj.weeks = weeks;\r\n        dates.push(obj);\r\n    }\r\n    \r\n    return dates;\r\n}\r\n\r\nfunction show(key, id)\r\n{\r\n    const i = _.findIndex(classrooms[key], ['id', id]);\r\n    classrooms[key][i].visible = !classrooms[key][i].visible;\r\n}\r\n\r\nasync function update(key, id)\r\n{\r\n    const i = _.findIndex(classrooms[key], ['id', id]);\r\n    classrooms[key][i].isUpdating = true;\r\n\r\n    const date = jq(`.update-date-${id}`).val();\r\n    const start = jq(`.update-time-start-${id}`).val();\r\n    const end = jq(`.update-time-end-${id}`).val();\r\n\r\n    if (!is_string_ymd(date)) {\r\n        alert('Date is in incorrect format');\r\n        return;\r\n    }\r\n\r\n    if (!is_string_hm(start) || !is_string_hm(end)) {\r\n        alert('Time is in incorrect format');\r\n        return;\r\n    }\r\n\r\n    try {\r\n        const xhr = await axios.post(`./classrooms/${id}`, {\r\n            _method: 'PUT',\r\n            data: {\r\n                start: `${date} ${start}`,\r\n                end: `${date} ${end}`\r\n            }\r\n        });\r\n\r\n        /**\r\n         * TODO Probably don't trigger an update. Just move the classrooms[key].item out to\r\n         * a different classrooms[key]. But idk\r\n         */\r\n        range = range;\r\n    } catch (e) {\r\n        alert('Error: Updating classroom failed');\r\n    } finally {\r\n        classrooms[key][i].isUpdating = false;\r\n    }\r\n}\r\n\r\nfunction createEmptyWeek()\r\n{\r\n    return Array(7).fill(false);\r\n}\r\n</script>\r\n\r\n<h1 class=\"text-center mt-5\">\r\n    {start.getDate()} {monthNames[start.getMonth()]} {start.getFullYear()} \r\n    &#8212; \r\n    {end.getDate()} {monthNames[end.getMonth()]} {end.getFullYear()}\r\n</h1>\r\n\r\n{#if fetchStatus == 'fetching'}\r\n    <div class=\"text-center\">\r\n        <div class=\"spinner-border\" role=\"status\">\r\n            <span class=\"sr-only\">Loading...</span>\r\n        </div>\r\n        <p>Fetching classrooms...</p>\r\n    </div>\r\n{:else if fetchStatus == 'error'}\r\n    <div class=\"alert alert-warning\">\r\n        Failed fetching classrooms. Please retry after a few minutes.\r\n    </div>\r\n{/if}\r\n\r\n<div class=\"calendar\">\r\n    {#each calendar as {month, weeks}}\r\n        <h3 class=\"month\">{monthNames[month]}</h3>\r\n\r\n        <div class=\"d-flex justify-content-end header\">\r\n            <div class=\"column weekend\">\r\n                SUN\r\n            </div>\r\n\r\n            <div class=\"column\">\r\n                MON\r\n            </div>\r\n\r\n            <div class=\"column\">\r\n                TUE\r\n            </div>\r\n\r\n            <div class=\"column\">\r\n                WED\r\n            </div>\r\n\r\n            <div class=\"column\">\r\n                THU\r\n            </div>\r\n\r\n            <div class=\"column\">\r\n                FRI\r\n            </div>\r\n\r\n            <div class=\"column weekend\">\r\n                SAT\r\n            </div>\r\n        </div>\r\n        \r\n        {#each weeks as week}\r\n            <div class=\"d-flex body\">\r\n                {#each week as day}\r\n                    {#if day == false}\r\n                        <div class=\"column no-day\"></div>\r\n                    {:else}\r\n                        <div class=\"column day\">\r\n                            {#if classrooms[date_ymd(day)] && classrooms[date_ymd(day)].length}\r\n                                <div class=\"text-right date mb-1\">{day.getDate()}</div>\r\n\r\n                                {#each classrooms[date_ymd(day)] as {data, start, end, visible, isUpdating}}\r\n                                    <div class=\"d-flex align-items-center\">\r\n                                        <div class=\"w-auto mr-3\">\r\n                                            <input type=\"checkbox\" data-id={data.id} class=\"form-control c\">\r\n                                        </div>\r\n                                        <span class=\"classroom-item w-100\" on:click={() => { show(date_ymd(day), data.id) }}>\r\n                                            {date_hm(start)} &#8212; {date_hm(end)}\r\n                                        </span>\r\n                                    </div>\r\n\r\n                                    {#if visible}\r\n                                        <div class=\"detail-view\" transition:slide>\r\n                                            <div class=\"i\">\r\n                                                <label for=\"dv-teacher\">Assigned Teacher</label>\r\n                                                <span class=\"text-muted\">\r\n                                                    {#if data.teacher}\r\n                                                        {data.teacher.full_name}\r\n                                                    {:else}\r\n                                                        NONE\r\n                                                    {/if}\r\n                                                </span>\r\n                                            </div>\r\n\r\n                                            <div class=\"i\">\r\n                                                <label for=\"dv-teacher\">Date <span class=\"text-muted\">(YYYY-MM-DD)</span></label>\r\n                                                <input type=\"text\" class=\"form-control form-control-sm f update-date-{ data.id }\" value={date_ymd(start)}>\r\n                                            </div>\r\n\r\n                                            <div class=\"i\">\r\n                                                <label for=\"dv-teacher\">Start Time <span class=\"text-muted\">24 hour format (HH:MM)</span></label>\r\n                                                <input type=\"text\" class=\"form-control form-control-sm f update-time-start-{ data.id }\" value={date_hm(start)}>\r\n                                            </div>\r\n\r\n                                            <div class=\"i\">\r\n                                                <label for=\"dv-teacher\">End Time <span class=\"text-muted\">24 hour format (HH:MM)</span></label>\r\n                                                <input type=\"text\" class=\"form-control form-control-sm f update-time-end-{ data.id }\" value={date_hm(end)}>\r\n                                            </div>\r\n                                            \r\n                                            {#if isUpdating}\r\n                                                <button class=\"btn btn-primary btn-sm\" type=\"button\" disabled>\r\n                                                    <span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n                                                    Loading...\r\n                                                </button>\r\n                                            {:else}\r\n                                                <div class=\"i\">\r\n                                                    <button class=\"btn btn-primary btn-sm\" on:click|preventDefault={() => { update(date_ymd(start), data.id) }}>Update</button>\r\n                                                </div>\r\n                                            {/if}\r\n                                        </div>\r\n                                    {/if}\r\n                                {/each}\r\n\r\n                            {:else}\r\n                                <div class=\"text-right date\">{day.getDate()}</div>\r\n                            {/if}\r\n                        </div>\r\n                    {/if}\r\n                {/each}\r\n            </div>\r\n        {/each}\r\n    {/each}\r\n</div>\r\n\r\n<style>\r\n.detail-view {\r\n    box-shadow: 0 0 0 1px rgba(43, 45, 80, 0.1),\r\n        0 2px 5px 0 rgba(43, 45, 80, 0.08),\r\n        0 1px 1.5px 0 rgba(0, 0, 0, 0.07),\r\n        0 1px 2px 0 rgba(0, 0, 0, 0.08);\r\n    padding: .355rem;\r\n    border-radius: .355rem;\r\n    margin: .5rem 0;\r\n}\r\n.detail-view label {\r\n    font-weight: bold;\r\n    display: block;\r\n    text-align: left;\r\n}\r\n.detail-view label, .detail-view .f {\r\n    font-size: .7rem;\r\n}\r\n.detail-view .i:not(:last-child) {\r\n    margin-bottom: 1rem;\r\n}\r\n\r\n.calendar {\r\n    padding: .5rem;\r\n    border-radius: .355rem;\r\n    margin-top: 2rem;\r\n    box-shadow: 0 0 0 1px rgba(43, 45, 80, 0.1),\r\n        0 2px 5px 0 rgba(43, 45, 80, 0.08),\r\n        0 1px 1.5px 0 rgba(0, 0, 0, 0.07),\r\n        0 1px 2px 0 rgba(0, 0, 0, 0.08);\r\n}\r\n\r\n.calendar .column {\r\n    width: 14.285714285714286%;\r\n    text-align: center;\r\n}\r\n\r\n.calendar .header {\r\n    border-bottom: 1px solid #ececec;\r\n    padding-bottom: .5rem;\r\n    padding-top: .5rem;\r\n}\r\n\r\n.calendar .header .column {\r\n    font-size: 1.4rem;\r\n}\r\n\r\n.calendar .header .weekend {\r\n    color: #f33;\r\n}\r\n\r\n.calendar .body .column {\r\n    padding: 2rem 0;\r\n    border-right: 1px solid #ececec;\r\n    border-bottom: 1px solid #ececec;\r\n}\r\n\r\n.calendar .body .day {\r\n    font-size: 1.5rem;\r\n    min-height: 100px;\r\n    padding: .5rem;\r\n}\r\n\r\n.calendar .body .day .date {\r\n    font-size: 1rem;\r\n    color: #212529;\r\n}\r\n\r\n.calendar .body .no-day {\r\n    background: #ececec;\r\n    min-height: 100px;\r\n}\r\n.calendar .month {\r\n    background: #ececec;\r\n    padding: 1rem 0;\r\n    text-align: center;\r\n}\r\n\r\n.calendar .classroom-item {\r\n    display: block;\r\n    font-size: .9rem;\r\n    color: inherit;\r\n    cursor: pointer;\r\n    text-align: left;\r\n    padding: .3rem;\r\n    background: rgb(140, 176, 255);\r\n    border-radius: .355rem;\r\n}\r\n.calendar span.classroom-item:hover {\r\n    background: rgb(27, 99, 253);\r\n    color: #fff;\r\n}\r\n</style>",
    "<script>\r\nimport _ from 'lodash';\r\nimport jq from 'jquery';\r\nimport axios from 'axios';\r\nimport {onMount} from 'svelte';\r\nimport {Countries} from 'countries';\r\n\r\nlet countryStates = [], filteredCountries = [];\r\n$: {\r\n    if (!_.isNull($Countries)) {\r\n        countryStates = $Countries;\r\n        filteredCountries = countryStates;\r\n    }\r\n}\r\n\r\nlet keywords;\r\nconst searchCountry = _.debounce(async () => {\r\n    if (keywords.length) {\r\n        filteredCountries = countryStates.filter((country) => {\r\n            const regexp = new RegExp(`(${keywords})`, 'i');\r\n\r\n            return regexp.test(country.name) \r\n                || regexp.test(country.code);\r\n        });\r\n    } else {\r\n        filteredCountries = countryStates;\r\n    }\r\n\r\n    jq('[data-edit]').prop('hidden', true);\r\n\r\n    reset();\r\n}, 700);\r\n\r\nonMount(() => {\r\n    jq('.countries').on('click', '[data-country]', (evt) => {\r\n        const code = evt.currentTarget.getAttribute('data-country'),\r\n            edit = jq(`[data-edit=${code}]`),\r\n            vis = edit.prop('hidden');\r\n\r\n        jq('[data-edit]').prop('hidden', true);\r\n\r\n        edit.prop('hidden', !vis);\r\n\r\n        reset();\r\n    });\r\n});\r\n\r\nlet isSaving = false, errors = [], success = false;\r\nasync function save(evt, id)\r\n{\r\n    isSaving = true;\r\n\r\n    const data = new FormData(evt.target);\r\n\r\n    try {\r\n        await axios.post(`./countries/${id}`, data);\r\n        reset();\r\n\r\n        success = true;\r\n    } catch (e) {\r\n        reset();\r\n\r\n        _.forEach(e.response.data.errors, (error) => {\r\n            errors = [...errors, error[0]];\r\n        });\r\n    }\r\n}\r\n\r\nfunction reset()\r\n{\r\n    isSaving = false;\r\n    success = false;\r\n    errors = [];\r\n}\r\n</script>\r\n\r\n<input type=\"text\" bind:value={keywords} class=\"form-control form-control-lg mt-4\" on:keyup={searchCountry} placeholder=\"Search Country\" />\r\n\r\n<table class=\"table table-hover mt-5 countries\">\r\n    <thead>\r\n        <tr>\r\n            <th>Country Name</th>\r\n            <th>Code</th>\r\n            <th>Price/class (Weekday)</th>\r\n            <th>Price/class (Weekend)</th>\r\n            <th>Currency</th>\r\n            <th>Duration/class</th>\r\n        </tr>\r\n    </thead>\r\n\r\n    <tbody>\r\n        {#each filteredCountries as country}\r\n            <tr data-country={country.code}>\r\n                <td>{country.name}</td>\r\n                <td>{country.code}</td>\r\n                <td>{@html !country.is_defined ? '<span class=\"text-muted\">Undefined</span>' : country.price}</td>\r\n                <td>{@html !country.is_defined ? '<span class=\"text-muted\">Undefined</span>' : country.price_weekend}</td>\r\n                <td>{@html !country.is_defined ? '<span class=\"text-muted\">Undefined</span>' : country.currency_code}</td>\r\n                <td>{@html !country.is_defined ? '<span class=\"text-muted\">Undefined</span>' : `${country.duration} <span class=\"font-italic\">minutes</span>`}</td>\r\n            </tr>\r\n            <tr data-edit={country.code} hidden>\r\n                <td colspan=\"5\">\r\n                    <h4 class=\"mb-3\">{country.name}</h4>\r\n                    <form class=\"w-75\" novalidate on:submit|preventDefault={(evt) => { save(evt, country.id) }}>\r\n                        <input type=\"hidden\" name=\"_method\" value=\"PUT\">\r\n                        <div class=\"form-group row\">\r\n                            <label for=\"price_weekday\" class=\"col-4 col-form-label\">Price/class weekdays</label>\r\n                            <div class=\"col-8\">\r\n                                <input type=\"text\" class=\"form-control w-50\" id=\"price_weekday\" name=\"data[price]\" value={country.price} disabled={isSaving}>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"form-group row\">\r\n                            <label for=\"price_weekend\" class=\"col-4 col-form-label\">Price/class weekends</label>\r\n                            <div class=\"col-8\">\r\n                                <input type=\"text\" class=\"form-control w-50\" id=\"price_weekend\" name=\"data[price_weekend]\" value={country.price_weekend} disabled={isSaving}>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"form-group row\">\r\n                            <label for=\"currency_code\" class=\"col-4 col-form-label\">Currency Code</label>\r\n                            <div class=\"col-8\">\r\n                                <input type=\"text\" class=\"form-control w-50\" id=\"currency_code\" name=\"data[currency_code]\" placeholder=\"e.g. PHP, USD, CAD, NZD\" value={country.currency_code} disabled={isSaving}>\r\n                                <small class=\"form-text text-muted\">3 character code that represents the country's currency</small>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"form-group row\">\r\n                            <label for=\"duration\" class=\"col-4 col-form-label\">Duration/class (number in minutes)</label>\r\n                            <div class=\"col-8\">\r\n                                <input type=\"text\" class=\"form-control w-50\" id=\"duration\" name=\"data[duration]\" value={country.duration} disabled={isSaving}>\r\n                            </div>\r\n                        </div>\r\n                        {#if success}\r\n                            <div class=\"alert alert-success\">\r\n                                Successfully updated <em>{country.name}</em>\r\n                            </div>\r\n                        {/if}\r\n                        \r\n                        {#if errors.length}\r\n                            <div class=\"alert alert-danger\">\r\n                                The following errors were found:\r\n\r\n                                <ul>\r\n                                    {#each errors as error}\r\n                                        <li>{error}</li>\r\n                                    {/each}\r\n                                </ul>\r\n                            </div>\r\n                        {/if}\r\n\r\n                        {#if isSaving}\r\n                            <button class=\"btn btn-primary\" type=\"button\" disabled>\r\n                                <span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n                                Loading...\r\n                            </button>\r\n                        {:else}\r\n                            <button type=\"submit\" class=\"btn btn-primary\">Save</button>\r\n                        {/if}\r\n                    </form>\r\n                </td>\r\n            </tr>\r\n        {/each}\r\n    </tbody>\r\n</table>\r\n\r\n<style>\r\n.countries tbody tr[data-country] {\r\n    cursor: pointer;\r\n}\r\n.countries tbody tr[data-edit]:hover {\r\n    background: none !important;\r\n}\r\n\r\n.edit-form {\r\n    width: 15%;\r\n}\r\n</style>",
    "<script>\r\nexport let user;\r\n\r\nimport SubmitButton from './../partials/SubmitButton.svelte';\r\nimport Breadcrumb from './../partials/Breadcrumb.svelte';\r\n\r\nimport _ from 'lodash';\r\nimport {onMount} from 'svelte';\r\nimport axios from 'axios';\r\nimport jq from 'jquery';\r\nimport Pikaday from 'pikaday';\r\nimport {\r\n    KeyIcon,\r\n    UserIcon,\r\n    InfoIcon,\r\n    HelpCircleIcon\r\n} from 'svelte-feather-icons';\r\n\r\nconst path = [\r\n    'Home',\r\n    { label: 'Students', link: `#/students` },\r\n    { label: user.full_name, link: `#/student/${user.id}` },\r\n    'Edit Info'\r\n];\r\n\r\nlet birthday;\r\n\r\nonMount(() => {\r\n    const now = new Date();\r\n    const picker = new Pikaday({\r\n        field: birthday,\r\n        yearRange: [now.getFullYear() - 80, now.getFullYear()]\r\n    });\r\n\r\n    jq('[data-toggle=\"popover\"]').popover();\r\n});\r\n\r\nlet countries = [];\r\naxios.get('./countries', {\r\n    params: {\r\n        is_defined: true\r\n    }\r\n}).then((resp) => {\r\n    countries = resp.data;\r\n});\r\n\r\nlet status = {\r\n    credentials: {\r\n        isLoading: false,\r\n        isSuccess: false,\r\n        isFail: false,\r\n        buttonText: 'Update Credentials',\r\n        successText: 'Successfully updated credentials',\r\n        failText: ''\r\n    },\r\n\r\n    password: {\r\n        isLoading: false,\r\n        isSuccess: false,\r\n        isFail: false,\r\n        buttonText: 'Update Password',\r\n        successText: 'Successfully updated password',\r\n        failText: ''\r\n    },\r\n\r\n    info: {\r\n        isLoading: false,\r\n        isSuccess: false,\r\n        isFail: false,\r\n        buttonText: 'Update Personal Information',\r\n        successText: 'Successfully updated personal information',\r\n        failText: ''\r\n    }\r\n}\r\n\r\nasync function update(form, statusKey)\r\n{\r\n    const fields = form.querySelectorAll('input,select');\r\n    const data = new FormData(form);\r\n\r\n    status[statusKey].isLoading = true;\r\n\r\n    fields.forEach((field) => {\r\n        field.disabled = true;\r\n    });\r\n\r\n    try {\r\n        await axios.post(`./students/${user.id}`, data);\r\n\r\n        status[statusKey].isSuccess = true;\r\n        status[statusKey].isFail = false;\r\n\r\n        document.querySelectorAll('.is-invalid').forEach((field) => {\r\n            field.classList.remove('is-invalid');\r\n        });\r\n    } catch (e) {\r\n        status[statusKey].isSuccess = false;\r\n        status[statusKey].isFail = true;\r\n\r\n        let errors = [];\r\n        _.forEach(e.response.data.errors, (value, key) => {\r\n            let name = key.replace('.', '\\\\[') +'\\\\]';\r\n            let text = value[0].replace(/data\\./g, '');\r\n\r\n            document.querySelector(`[name=\"${name}\"]`).classList.add('is-invalid');\r\n\r\n            errors.push(text);\r\n        });\r\n\r\n        status[statusKey].failText = errors;\r\n    } finally {\r\n        status[statusKey].isLoading = false;\r\n        fields.forEach((field) => {\r\n            field.disabled = false;\r\n        });\r\n    }\r\n}\r\n</script>\r\n<Breadcrumb {path}></Breadcrumb>\r\n<div class=\"mx-auto w-50\">\r\n    <div class=\"accordion\" id=\"student-accordion\">\r\n        <div class=\"card\">\r\n            <div class=\"card-header\">\r\n                <h2 class=\"mb-0\">\r\n                    <span class=\"adjust-icon\"><UserIcon /></span>\r\n                    <button class=\"btn btn-link\" type=\"button\" data-toggle=\"collapse\" data-target=\"#student-form-1\">\r\n                        Credentials\r\n                    </button>\r\n                </h2>\r\n            </div>\r\n\r\n            <div id=\"student-form-1\" class=\"collapse\" data-parent=\"#student-accordion\">\r\n                <div class=\"card-body\">\r\n                    <form novalidate class=\"student-form\" on:submit|preventDefault={(e) => { update(e.target, 'credentials') }}>\r\n                        <input type=\"hidden\" name=\"_method\" value=\"PUT\" />\r\n                        <input type=\"hidden\" name=\"type\" value=\"credentials\" />\r\n                        <div class=\"form-row\">\r\n                            <div class=\"form-group col-md-6\">\r\n                                <label for=\"username\">Username</label>\r\n                                <input type=\"text\" class=\"form-control form-control-sm\" id=\"username\" name=\"data[username]\" value={user.username}>\r\n                            </div>\r\n\r\n                            <div class=\"form-group col-md-6\">\r\n                                <label for=\"email\">Email</label>\r\n                                <input type=\"email\" class=\"form-control form-control-sm\" id=\"email\" name=\"data[email]\" value={user.email}>\r\n                            </div>\r\n                        </div>\r\n                        \r\n                        <SubmitButton {...status['credentials']}></SubmitButton>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"card\">\r\n            <div class=\"card-header\">\r\n                <h2 class=\"mb-0\">\r\n                    <span class=\"adjust-icon\"><KeyIcon /></span>\r\n                    <button class=\"btn btn-link\" type=\"button\" data-toggle=\"collapse\" data-target=\"#student-form-2\">\r\n                        Password\r\n                    </button>\r\n                </h2>\r\n            </div>\r\n\r\n            <div id=\"student-form-2\" class=\"collapse\" data-parent=\"#student-accordion\">\r\n                <div class=\"card-body\">\r\n                    <form novalidate class=\"student-form\" on:submit|preventDefault={(e) => { update(e.target, 'password') }}>\r\n                        <input type=\"hidden\" name=\"_method\" value=\"PUT\" />\r\n                        <input type=\"hidden\" name=\"type\" value=\"password\" />\r\n                        <div class=\"form-row\">\r\n                            <div class=\"form-group col-md-6\">\r\n                                <label for=\"new_password\">New Password</label>\r\n                                <input type=\"password\" class=\"form-control form-control-sm\" id=\"new_password\" name=\"data[new_password]\">\r\n                            </div>\r\n\r\n                            <div class=\"form-group col-md-6\">\r\n                                <label for=\"new_password_repeat\">Repeat New Password</label>\r\n                                <input type=\"password\" class=\"form-control form-control-sm\" id=\"new_password_repeat\" name=\"data[new_password_repeat]\">\r\n                            </div>\r\n                        </div>\r\n                        \r\n                        <SubmitButton {...status['password']}></SubmitButton>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"card\">\r\n            <div class=\"card-header\">\r\n                <h2 class=\"mb-0\">\r\n                    <span class=\"adjust-icon\"><InfoIcon /></span>\r\n                    <button class=\"btn btn-link\" type=\"button\" data-toggle=\"collapse\" data-target=\"#student-form-3\">\r\n                        Personal Information\r\n                    </button>\r\n                </h2>\r\n            </div>\r\n\r\n            <div id=\"student-form-3\" class=\"collapse\" data-parent=\"#student-accordion\">\r\n                <div class=\"card-body\">\r\n                    <form novalidate class=\"student-form\" on:submit|preventDefault={(e) => { update(e.target, 'info') }}>\r\n                        <input type=\"hidden\" name=\"_method\" value=\"PUT\" />\r\n                        <input type=\"hidden\" name=\"type\" value=\"info\" />\r\n                        <div class=\"form-row\">\r\n                            <div class=\"form-group col-md-6\">\r\n                                <label for=\"full_name\">Full Name</label>\r\n                                <input type=\"text\" class=\"form-control form-control-sm\" id=\"full_name\" name=\"data[full_name]\" value={user.full_name}>\r\n                            </div>\r\n\r\n                            <div class=\"form-group col-md-6\">\r\n                                <label for=\"birthday\">Birthday</label>\r\n                                <input type=\"text\" class=\"form-control form-control-sm\" id=\"birthday\" placeholder=\"YYYY-MM-DD\" readonly name=\"data[birthday]\" bind:this={birthday} value={user.birthday}>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class=\"form-row\">\r\n                            <div class=\"form-group col\">\r\n                                <label for=\"personal_contact_number\">Personal Contact Number</label>\r\n                                <input type=\"text\" class=\"form-control form-control-sm\" id=\"personal_contact_number\" name=\"data[personal_contact_number]\" value={user.personal_contact_number}>\r\n                            </div>\r\n\r\n                            <div class=\"form-group col\">\r\n                                <label for=\"skype\">Skype ID</label>\r\n                                <input type=\"text\" class=\"form-control form-control-sm\" id=\"skype\" name=\"data[skype]\" value={user.skype}>\r\n                            </div>\r\n\r\n                            <div class=\"form-group col\">\r\n                                <label for=\"country\" data-toggle=\"popover\" data-trigger=\"hover\" data-placement=\"right\" data-content=\"Countries that are not listed in this field means that its prices per class, and currency is not yet defined. Go to Settings &raquo; Countries to configure\">\r\n                                    Country <span class=\"text-primary\"><HelpCircleIcon /></span>\r\n                                </label>\r\n                                <select class=\"custom-select form-control form-control-sm\" id=\"country\" name=\"data[country_code]\">\r\n                                    {#each countries as country}\r\n                                        <option value={country.code}>{country.name}</option>\r\n                                    {/each}\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n                        \r\n                        <SubmitButton {...status['info']}></SubmitButton>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<style>\r\n.adjust-icon {\r\n    font-size: 1.5rem;\r\n}\r\n.student-form label {\r\n    font-size: .8rem;\r\n    font-weight: bold;\r\n}\r\n</style>\r\n",
    "<script>\r\nexport let user;\r\n\r\nimport _ from 'lodash';\r\nimport jq from 'jquery';\r\nimport axios from 'axios';\r\nimport { date_ymd, date_hm } from 'util';\r\nimport { scale } from 'svelte/transition';\r\n\r\nlet enrollments;\r\nconst fetchEnrollments = axios.get('./enrollments', {\r\n    params: {\r\n        student: user.id,\r\n        with: ['classrooms']\r\n    }\r\n});\r\n\r\nfetchEnrollments.then((response) => {\r\n    enrollments = _.map(response.data, (data) => {\r\n        return {\r\n            id: data.id,\r\n            data,\r\n            saving: false,\r\n            modifying: false\r\n        }\r\n    });\r\n});\r\n\r\nasync function save(id)\r\n{\r\n    const index = _.findIndex(enrollments, ['id', id]);\r\n\r\n    if (index <= -1) {\r\n        return;\r\n    }\r\n\r\n    enrollments[index].saving = true;\r\n\r\n    try {\r\n        const active = jq(`.active-${id}`).val();\r\n        const paid = jq(`.paid-${id}`).val();\r\n\r\n        await axios.post(`./enrollment/${id}`, {\r\n            _method: 'PUT',\r\n            data: {\r\n                active,\r\n                paid\r\n            }\r\n        });\r\n\r\n        enrollments[index].data.active = active;\r\n        enrollments[index].data.paid = paid;\r\n\r\n        hide(id);\r\n    } catch (e) {\r\n        alert('An error occured during save');\r\n    } finally {\r\n        enrollments[index].saving = false;\r\n    }\r\n}\r\n\r\nfunction show(id)\r\n{\r\n    const index = _.findIndex(enrollments, ['id', id]);\r\n\r\n    if (index >= 0) {\r\n        enrollments[index].modifying = true;\r\n    }\r\n}\r\n\r\nfunction hide(id)\r\n{\r\n    const index = _.findIndex(enrollments, ['id', id]);\r\n\r\n    if (index >= 0) {\r\n        enrollments[index].modifying = false;\r\n    }\r\n}\r\n</script>\r\n\r\n\r\n{#await fetchEnrollments}\r\n    <div class=\"text-center mt-5\">\r\n        <div class=\"spinner-border\" role=\"status\">\r\n            <span class=\"sr-only\">Loading...</span>\r\n        </div>\r\n    </div>\r\n{:then}\r\n    <table class=\"table table-hover table-bordered\">\r\n        <thead>\r\n            <tr>\r\n                <th scope=\"col\">#</th>\r\n                <th scope=\"col\">Enrollment Period (Start)</th>\r\n                <th scope=\"col\">Enrollment Period (End)</th>\r\n                <th scope=\"col\"># classrooms</th>\r\n                <th scope=\"col\">Paid</th>\r\n                <th scope=\"col\">Active</th>\r\n                <th scope=\"col\">Invoice</th>\r\n                <th scope=\"col\">Created</th>\r\n                <th scope=\"col\">Last Updated</th>\r\n                <th scope=\"col\">&nbsp;</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            {#each enrollments as { data, modifying, saving} }\r\n                <tr>\r\n                    <th scope=\"row\">{data.id}</th>\r\n                    <td>\r\n                        {#if data.period}\r\n                            { data.period[0] }\r\n                        {:else}\r\n                            <span class=\"text-muted\">None</span>\r\n                        {/if}\r\n                    </td>\r\n                    <td>\r\n                        {#if data.period}\r\n                            { data.period[1] }\r\n                        {:else}\r\n                            <span class=\"text-muted\">None</span>\r\n                        {/if}\r\n                    </td>\r\n                    <td>{ data.classrooms.length }</td>\r\n                    <td>\r\n                        {#if modifying}\r\n                            <select class=\"custom-select custom-select-sm f paid-{data.id}\" disabled={saving}>\r\n                                <option value=\"1\" selected={ data.paid == true }>YES</option>\r\n                                <option value=\"0\" selected={ data.paid == false }>NO</option>\r\n                            </select>\r\n                        {:else}\r\n                            {@html\r\n                                data.paid == true ? \r\n                                    '<strong class=\"text-success\">Yes</strong>':\r\n                                    '<span class=\"text-muted\">No</span>'\r\n                            }\r\n                        {/if}\r\n                    </td>\r\n                    <td>\r\n                        {#if modifying}\r\n                            <select class=\"custom-select custom-select-sm f active-{data.id}\" disabled={saving}>\r\n                                <option value=\"1\" selected={ data.active == true }>YES</option>\r\n                                <option value=\"0\" selected={ data.active == false }>NO</option>\r\n                            </select>\r\n                        {:else}\r\n                            {@html\r\n                                data.active == true ?\r\n                                    '<strong class=\"text-success\">Yes</strong>':\r\n                                    '<span class=\"text-muted\">No</span>'\r\n                            }\r\n                        {/if}\r\n                    </td>\r\n                    <td>\r\n                        <a href=\"./enrollment/pdf/{ data.id }\" target=\"_blank\">PDF</a>\r\n                    </td>\r\n                    <td>{ date_ymd(new Date(data.created_at)) } { date_hm(new Date(data.created_at)) }</td>\r\n                    <td>{ date_ymd(new Date(data.updated_at)) } { date_hm(new Date(data.updated_at)) }</td>\r\n                    <td>\r\n                        {#if modifying}\r\n                            <button class=\"btn btn-success btn-sm\" on:click|preventDefault={() => { save(data.id) }} disabled={saving}>\r\n                                Save\r\n                            </button>\r\n                            <button class=\"btn btn-secondary btn-sm\" on:click|preventDefault={() => { hide(data.id) }}>\r\n                                Cancel\r\n                            </button>\r\n                        {:else}\r\n                            <button class=\"btn btn-primary btn-sm\" on:click|preventDefault={() => { show(data.id) }}>\r\n                                Modify\r\n                            </button>\r\n                        {/if}\r\n                    </td>\r\n                </tr>\r\n            {/each}\r\n        </tbody>\r\n    </table>\r\n{:catch}\r\n    <div class=\"w-50 mx-auto\">\r\n        <div class=\"alert alert-warning\">\r\n            Failed to retrieve enrollment data\r\n        </div>\r\n    </div>\r\n{/await}\r\n\r\n<style>\r\n.f {\r\n    font-size: 0.7em;\r\n}\r\n</style>",
    "<script>\r\nexport let user = {};\r\n\r\nimport Breadcrumb from './../partials/Breadcrumb.svelte';\r\nimport Calendar from './../partials/Calendar.svelte';\r\n\r\nimport {fly} from 'svelte/transition';\r\nimport {onMount} from 'svelte';\r\nimport Pikaday from 'pikaday';\r\nimport axios from 'axios';\r\nimport jq from 'jquery';\r\nimport _ from 'lodash';\r\n\r\nconst now = new Date();\r\n\r\nlet range = [\r\n    new Date(now.getFullYear(), now.getMonth(), 1),\r\n    new Date(now.getFullYear(), now.getMonth() + 1, 0)\r\n];\r\n\r\nlet fieldDateFrom, fieldDateTo;\r\nonMount(() => {\r\n    const pickerFrom = new Pikaday({\r\n        field: fieldDateFrom,\r\n        defaultDate: range[0],\r\n        setDefaultDate: true,\r\n        onSelect: () => {\r\n            pickerOnSelect(0, pickerFrom.getDate());\r\n        }\r\n    });\r\n\r\n    const pickerTo = new Pikaday({\r\n        field: fieldDateTo,\r\n        defaultDate: range[1],\r\n        setDefaultDate: true,\r\n        onSelect: () => {\r\n            pickerOnSelect(1, pickerTo.getDate());\r\n        }\r\n    });\r\n\r\n    jq('[data-toggle=\"popover\"]').popover();\r\n});\r\n\r\nfunction pickerOnSelect(dest, value)\r\n{\r\n    range[dest] = value;\r\n}\r\n\r\nconst fetchTeachers = axios.get('./teachers');\r\nconst fetchClassroomStatus = axios.get('./classroom/status');\r\n\r\nlet checkedClassrooms = [], checkAll = false;\r\n\r\nfunction checkedItems(event)\r\n{\r\n    checkedClassrooms = event.detail;\r\n}\r\n\r\nlet classroomsTeacher, classroomsStatus;\r\n\r\nlet updatingClassrooms = false;\r\n\r\nasync function updateClassrooms()\r\n{\r\n    if (classroomsTeacher === \"\" && classroomsStatus === \"\") {\r\n        return;\r\n    }\r\n\r\n    updatingClassrooms = true;\r\n    const data = {\r\n        ids: checkedClassrooms\r\n    };\r\n\r\n    if (classroomsTeacher !== '') {\r\n        data['teacher'] = classroomsTeacher;\r\n    }\r\n\r\n    if (classroomsStatus !== '') {\r\n        data['status'] = classroomsStatus;\r\n    }\r\n\r\n    try {\r\n        const xhr = await axios.post('./classrooms/batch', {\r\n            _method: 'PUT',\r\n            data\r\n        });\r\n    } catch (e) {\r\n        alert('Unexpected error: '+ e.message);\r\n    } finally {\r\n        updatingClassrooms = false;\r\n    }\r\n}\r\n</script>\r\n\r\n<div class=\"d-flex\">\r\n    <div class=\"mr-3\">\r\n        {#if user.has_active_enrollment}\r\n            <button class=\"btn btn-primary\" disabled data-container=\"body\" data-trigger=\"hover\" data-toggle=\"popover\" data-placement=\"top\" data-content=\"Unable to make new enrollment. Student have an active enrollment\">Enroll</button>\r\n        {:else}\r\n            <a href=\"#/enroll/{user.id}\"class=\"btn btn-primary\">Enroll</a>\r\n        {/if}\r\n    </div>\r\n    <div>\r\n        <button class=\"btn btn-primary\">Create Demo Class</button>\r\n    </div>\r\n    <div class=\"d-flex ml-5 align-items-center mr-auto\">\r\n        <div class=\"mr-1\">\r\n            Filter from:\r\n        </div>\r\n        <div class=\"form-inline mr-1\">\r\n            <input type=\"text\" readonly class=\"form-control\" id=\"from-date\" bind:this={fieldDateFrom}>\r\n        </div>\r\n        <div class=\"mr-1\">\r\n            to:\r\n        </div>\r\n        <div class=\"form-inline\">\r\n            <input type=\"text\" readonly class=\"form-control\" id=\"to-date\" bind:this={fieldDateTo}>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div class=\"d-flex calendar-controls\">\r\n    <div class=\"ctrl w-auto mr-3\">\r\n        <label for=\"class-select-all\" class=\"l\">Select All</label>\r\n        <input type=\"checkbox\" class=\"form-control form-control-sm\" bind:checked={checkAll} id=\"class-select-all\">\r\n    </div>\r\n    {#if checkedClassrooms.length > 0}\r\n        <div class=\"ctrl w-auto\" transition:fly=\"{{ x: 200, duration: 200 }}\">\r\n            <div class=\"d-flex\">\r\n                <div class=\"mr-3\">\r\n                    <label class=\"l\" for=\"class-assign-to\">Assign To</label>\r\n                    {#await fetchTeachers}\r\n                        <div class=\"spinner-border spinner-border-sm\" role=\"status\">\r\n                            <span class=\"sr-only\">Loading...</span>\r\n                        </div>\r\n                    {:then response}\r\n                        <select class=\"custom-select custom-select-sm\" disabled={updatingClassrooms} bind:value={classroomsTeacher} type=\"checkbox\" id=\"class-assign-to\">\r\n                            <option value=\"\">Select teacher...</option>\r\n                            {#each response.data as teacher}\r\n                                <option value=\"{teacher.id}\">[{teacher.username}] {teacher.full_name}</option>\r\n                            {/each}\r\n                        </select>\r\n                    {:catch}\r\n                        <div class=\"alert alert-info\">\r\n                            Failed retrieving teachers\r\n                        </div>\r\n                    {/await}\r\n                </div>\r\n\r\n                <div class=\"mr-3\">\r\n                    <label class=\"l\" for=\"class-assign-to\">Status</label>\r\n                    {#await fetchClassroomStatus}\r\n                        <div class=\"spinner-border spinner-border-sm\" role=\"status\">\r\n                            <span class=\"sr-only\">Loading...</span>\r\n                        </div>\r\n                    {:then response}\r\n                        <select class=\"custom-select custom-select-sm\" disabled={updatingClassrooms} bind:value={classroomsStatus} type=\"checkbox\" id=\"class-assign-to\">\r\n                            <option value=\"\">Select status...</option>\r\n                            {#each response.data as status}\r\n                                <option value={status[0]}>{status[1]}</option>\r\n                            {/each}\r\n                        </select>\r\n                    {:catch}\r\n                        <div class=\"alert alert-info\">\r\n                            Failed retrieving status\r\n                        </div>\r\n                    {/await}\r\n                </div>\r\n\r\n                <div class=\"mr-3\">\r\n                    <label class=\"l\">&nbsp;</label>\r\n                    {#if updatingClassrooms}\r\n                        <button class=\"btn btn-primary btn-sm\" type=\"button\" disabled>\r\n                            <span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\r\n                            Loading...\r\n                        </button>\r\n                    {:else}\r\n                        <button class=\"btn btn-primary btn-sm\" on:click|preventDefault={updateClassrooms}>Update</button>\r\n                    {/if}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    {/if}\r\n</div>\r\n\r\n<Calendar {user} {range} on:checkedItems={checkedItems} {checkAll}></Calendar>\r\n\r\n<style>\r\n.l {\r\n    display: block;\r\n    font-size: 0.7em;\r\n    font-weight: bold;\r\n}\r\n.calendar-controls .ctrl {\r\n    padding: .5rem;\r\n    border-radius: .355rem;\r\n    margin-top: 2rem;\r\n    box-shadow: 0 0 0 1px rgba(43, 45, 80, 0.1), 0 2px 5px 0 rgba(43, 45, 80, 0.08), 0 1px 1.5px 0 rgba(0, 0, 0, 0.07), 0 1px 2px 0 rgba(0, 0, 0, 0.08);\r\n}\r\n</style>",
    "<script>\r\nexport let teacher;\r\n\r\nimport _ from 'lodash';\r\nimport axios from 'axios';\r\nimport { slide } from 'svelte/transition';\r\nimport { date_ymd } from 'util';\r\n\r\nconst fetchEducationalAttainment = axios.get('./teacher/educational-attainment');\r\n\r\nlet isSaving = false, success = false, fail = false, errors = [];\r\nasync function save(evt)\r\n{\r\n    isSaving = true, success = false, fail = false;\r\n\r\n    const form = new FormData(evt.target);\r\n    form.append('_method', 'PUT');\r\n    \r\n    try {\r\n        await axios.post(`./teachers/${ teacher.id }`, form);\r\n        success = true;\r\n    } catch (e) {\r\n        console.log(e.response.data);\r\n        fail = true;\r\n\r\n        if (e.response.data.errors) {\r\n            errors = _.map(e.response.data.errors, (o) => {\r\n                return _.replace(o[0], 'data.', '');\r\n            });\r\n        } else {\r\n            errors = e.message;\r\n        }\r\n    } finally {\r\n        isSaving = false;\r\n    }\r\n\r\n    return false;\r\n}\r\n</script>\r\n\r\n{#if success}\r\n    <div class=\"alert alert-success w-50 mx-auto my-4\" transition:slide>\r\n        <strong>Success:</strong> Updated teacher information!\r\n    </div>\r\n{/if}\r\n\r\n{#if fail}\r\n    <div class=\"alert alert-danger w-50 mx-auto my-4\" transition:slide>\r\n        {#if _.isString(errors)}\r\n            { errors }\r\n        {:else}\r\n            The following errors occured:\r\n            <ul>\r\n                {#each errors as error}\r\n                    <li>{ error }</li>\r\n                {/each}\r\n            </ul>\r\n        {/if}\r\n    </div>\r\n{/if}\r\n\r\n<div class=\"row\">\r\n    <div class=\"col-6\">\r\n        <form class=\"profile-form\" novalidate on:submit|preventDefault={save}>\r\n            <h4>Credentials</h4>\r\n            <div class=\"row\">\r\n                <div class=\"col\">\r\n                    <div class=\"form-group\">\r\n                        <label for=\"profile-email\">Email</label>\r\n                        <input type=\"email\" class=\"form-control\" id=\"profile-email\" name=\"data[email]\" value={ teacher.email } disabled={isSaving}>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"col\">\r\n                    <div class=\"form-group\">\r\n                        <label for=\"profile-username\">Username</label>\r\n                        <input type=\"text\" class=\"form-control\" id=\"profile-username\" name=\"data[username]\" value={ teacher.username } disabled={isSaving}>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <button type=\"submit\" class=\"btn btn-primary\" disabled={isSaving}>Update Credentials</button>\r\n        </form>\r\n\r\n        <form class=\"profile-form\" novalidate on:submit|preventDefault={save}>\r\n            <h4>Change Password</h4>\r\n            <div class=\"row\">\r\n                <div class=\"col\">\r\n                    <div class=\"form-group\">\r\n                        <label for=\"profile-password\">Password</label>\r\n                        <input type=\"text\" class=\"form-control\" id=\"profile-password\" name=\"data[password]\" disabled={isSaving}>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"col\">\r\n                    <div class=\"form-group\">\r\n                        <label for=\"profile-password_repeat\">Repeat Password</label>\r\n                        <input type=\"text\" class=\"form-control\" id=\"profile-password_repeat\" name=\"data[password_repeat]\" disabled={isSaving}>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <button type=\"submit\" class=\"btn btn-primary\" disabled={isSaving}>Update Password</button>\r\n        </form>\r\n\r\n        <form class=\"profile-form\" novalidate on:submit|preventDefault={save}>\r\n            <h4>Personal &amp Contact Information</h4>\r\n            <div class=\"row\">\r\n                <div class=\"col\">\r\n                    <div class=\"form-group\">\r\n                        <label for=\"profile-full_name\">Full Name</label>\r\n                        <input type=\"text\" class=\"form-control\" id=\"profile-full_name\" name=\"data[full_name]\" value={ teacher.full_name } disabled={isSaving}>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"row\">\r\n                <div class=\"col\">\r\n                    <div class=\"form-group\">\r\n                        <label for=\"profile-skype\">Skype</label>\r\n                        <input type=\"text\" class=\"form-control\" id=\"profile-skype\" name=\"data[skype]\" value={ teacher.skype } disabled={isSaving}>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"col\">\r\n                    <div class=\"form-group\">\r\n                        <label for=\"profile-educational_attainment\">Educational Attainment</label>\r\n                        {#await fetchEducationalAttainment}\r\n                            <div class=\"text-center\">\r\n                                <div class=\"spinner-border\" role=\"status\">\r\n                                    <span class=\"sr-only\">Loading...</span>\r\n                                </div>\r\n                            </div>\r\n                        {:then response}\r\n                            <select class=\"custom-select\" id=\"profile-educational_attainment\" name=\"data[educational_attainment]\" disabled={isSaving}>\r\n                                {#each response.data as ea}\r\n                                    <option value={ ea[0] } selected={ ea[0] == teacher.educational_attainment }>{ ea[1] }</option>\r\n                                {/each}\r\n                            </select>\r\n                        {:catch}\r\n                            <div class=\"alert alert-warning\">\r\n                                Failed to get educational attainment values\r\n                            </div>\r\n                        {/await}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"row\">\r\n                <div class=\"col\">\r\n                    <div class=\"form-group\">\r\n                        <label for=\"profile-personal_contact_number\">Personal Contact Number</label>\r\n                        <input type=\"text\" class=\"form-control\" id=\"profile-personal_contact_number\" name=\"data[personal_contact_number]\" value={ teacher.personal_contact_number } disabled={isSaving}>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class=\"col\">\r\n                    <div class=\"form-group\">\r\n                        <label for=\"profile-birthday\">Birthday (YYYY-MM-DD)</label>\r\n                        <input type=\"text\" class=\"form-control\" id=\"profile-birthday\" name=\"data[birthday]\" value={ teacher.birthday ? date_ymd(teacher.birthday) : '' } disabled={isSaving}>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"row\">\r\n                <div class=\"col\">\r\n                    <div class=\"form-group\">\r\n                        <label for=\"profile-address\">Address</label>\r\n                        <input type=\"text\" class=\"form-control\" id=\"profile-address\" name=\"data[address]\" value={ teacher.address } disabled={isSaving}>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <button type=\"submit\" class=\"btn btn-primary\" disabled={isSaving}>Update Information</button>\r\n        </form>\r\n    </div>\r\n    <div class=\"col-6\">\r\n        <form class=\"profile-form\" novalidate on:submit|preventDefault={save}>\r\n            <h4>Salary</h4>\r\n\r\n            <div class=\"row\">\r\n                <div class=\"col\">\r\n                    <div class=\"form-group\">\r\n                        <label for=\"profile-salary\">Weekday Salary (Mon - Fri)</label>\r\n                        <input type=\"text\" class=\"form-control\" id=\"profile-salary\" name=\"data[salary]\" value={ teacher.salary } disabled={isSaving}>\r\n                    </div>\r\n                </div>\r\n            \r\n                <div class=\"col\">\r\n                    <div class=\"form-group\">\r\n                        <label for=\"profile-salary_weekend\">Weekend Salary (Sat, Sun)</label>\r\n                        <input type=\"text\" class=\"form-control\" id=\"profile-salary_weekend\" name=\"data[salary_weekend]\" value={ teacher.salary_weekend } disabled={isSaving}>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <button type=\"submit\" class=\"btn btn-primary\" disabled={isSaving}>Update Salary</button>\r\n        </form>\r\n    </div>\r\n</div>\r\n<style>\r\n.profile-form {\r\n    box-shadow: 0 0 0 1px rgba(43, 45, 80, 0.1),\r\n        0 2px 5px 0 rgba(43, 45, 80, 0.08),\r\n        0 1px 1.5px 0 rgba(0, 0, 0, 0.07),\r\n        0 1px 2px 0 rgba(0, 0, 0, 0.08);\r\n    border-radius: .355rem;\r\n    padding: 1rem;\r\n    margin-bottom: 1rem;\r\n}\r\n</style>"
  ],
  "names": [],
  "mappings": "AAwCS,SAAS,AAAE,CAAC,AACnB,KAAK,CAAE,IAAI,CACX,WAAW,CAAE,IAAI,AAClB,CAAC,AACO,KAAK,AAAE,CAAC,AACf,WAAW,CAAE,QAAQ,CAAC,CAAC,UAAU,CAAC,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,CAAC,UAAU,AACvE,CAAC,AAED,YAAY,eAAC,CAAC,AACb,SAAS,CAAE,MAAM,AAClB,CAAC;ACsCF,KAAK,eAAC,CAAC,AACH,KAAK,CAAE,OAAO,AAClB,CAAC;ACwCD,SAAS,4BAAC,CAAC,AACP,UAAU,CAAE,IAAI,AACpB,CAAC,AAED,uBAAS,CAAC,QAAQ,CAAC,mBAAK,KAAK,WAAW,CAAC,AAAC,CAAC,AACvC,aAAa,CAAE,IAAI,CACnB,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,AACpC,CAAC,AACD,uBAAS,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE,cAAC,CAAC,AACzB,OAAO,CAAE,KAAK,CACd,WAAW,CAAE,IAAI,CACjB,KAAK,CAAE,OAAO,AAClB,CAAC,AACD,uBAAS,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE,cAAC,CAAC,AACzB,UAAU,CAAE,KAAK,CACjB,cAAc,CAAE,IAAI,AACxB,CAAC,AAED,uBAAS,CAAC,6BAAe,CACzB,uBAAS,CAAC,QAAQ,CAAC,OAAO,cAAC,CAAC,AACxB,WAAW,CAAE,IAAI,AACrB,CAAC,AAED,uBAAS,CAAC,QAAQ,CAAC,KAAK,cAAC,CAAC,AACtB,KAAK,CAAE,IAAI,AACf,CAAC,AAED,uBAAS,CAAC,sBAAQ,CAClB,uBAAS,CAAC,eAAe,cAAC,CAAC,AACvB,OAAO,CAAE,KAAK,CACd,SAAS,CAAE,KAAK,AACpB,CAAC,AAED,uBAAS,CAAC,eAAe,cAAC,CAAC,AACvB,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,AACpC,CAAC,AAED,uBAAS,CAAC,sBAAQ,MAAM,CACxB,uBAAS,CAAC,QAAQ,QAAQ,cAAC,CAAC,AACxB,aAAa,CAAE,KAAK,CACpB,UAAU,CAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC;QACxC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC;QACnC,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;QAClC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CACnC,aAAa,CAAE,OAAO,AAC1B,CAAC,AACD,uBAAS,CAAC,QAAQ,CAAC,QAAQ,cAAC,CAAC,AACzB,MAAM,CAAE,OAAO,AACnB,CAAC,AACD,uBAAS,CAAC,sBAAQ,KAAK,WAAW,CAAC,AAAC,CAAC,AACjC,aAAa,CAAE,KAAK,AACxB,CAAC,AAED,uBAAS,CAAC,QAAQ,CAAC,QAAQ,cAAC,CAAC,AACzB,UAAU,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CAC7B,UAAU,CAAE,KAAK,CACjB,WAAW,CAAE,KAAK,AACtB,CAAC;AC6ED,GAAG,eAAC,CAAC,AACD,SAAS,CAAE,MAAM,CACjB,OAAO,CAAE,KAAK,AAClB,CAAC;ACgCD,GAAG,eAAC,CAAC,AACD,SAAS,CAAE,MAAM,CACjB,OAAO,CAAE,KAAK,AAClB,CAAC;ACtND,KAAK,4BAAC,CAAC,AACH,UAAU,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,CAC1B,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,AACjC,CAAC,AACD,mBAAK,CAAC,GAAG,cAAC,CAAC,AACP,KAAK,CAAE,IAAI,CACX,OAAO,CAAE,IAAI,CAAC,CAAC,CACf,UAAU,CAAE,MAAM,CAClB,SAAS,CAAE,MAAM,AACrB,CAAC,AACD,mBAAK,CAAC,iBAAG,KAAK,WAAW,CAAC,AAAC,CAAC,AACxB,YAAY,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,AAChC,CAAC,AACD,mBAAK,CAAC,QAAQ,cAAC,CAAC,AACZ,KAAK,CAAE,IAAI,CACX,WAAW,CAAE,IAAI,AACrB,CAAC;ACgMD,UAAU,eAAC,CAAC,AACR,OAAO,CAAE,KAAK,CACd,SAAS,CAAE,MAAM,AACrB,CAAC,AACD,MAAM,eAAC,CAAC,AACJ,UAAU,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,CAC1B,UAAU,CAAE,IAAI,CAChB,WAAW,CAAE,IAAI,CACjB,WAAW,CAAE,IAAI,AACrB,CAAC,AACD,aAAa,eAAC,CAAC,AACX,SAAS,CAAE,IAAI,CACf,eAAe,CAAE,SAAS,AAC9B,CAAC;AC3DD,KAAK,4BAAC,CAAC,AACH,YAAY,CAAE,IAAI,AACtB,CAAC,AACD,mBAAK,CAAC,IAAI,cAAC,CAAC,AACR,OAAO,CAAE,KAAK,AAClB,CAAC,AACD,mBAAK,CAAC,OAAO,cAAC,CAAC,AACX,MAAM,CAAE,OAAO,CACf,UAAU,CAAE,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,AAClC,CAAC,AACD,mBAAK,CAAC,qBAAO,MAAM,AAAC,CAAC,AACjB,KAAK,CAAE,IAAI,CACX,UAAU,CAAE,OAAO,AACvB,CAAC,AACD,aAAa,4BAAC,CAAC,AACX,UAAU,CAAE,IAAI,CAChB,WAAW,CAAE,IAAI,CACjB,YAAY,CAAE,IAAI,CAClB,OAAO,CAAE,KAAK,CACd,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,CACtB,aAAa,CAAE,OAAO,AAC1B,CAAC,AACD,2BAAa,CAAC,QAAQ,cAAC,CAAC,AACpB,SAAS,CAAE,KAAK,AACpB,CAAC,AAED,SAAS,4BAAC,CAAC,AACP,KAAK,CAAE,IAAI,CACX,OAAO,CAAE,IAAI,CAAC,CAAC,CACf,UAAU,CAAE,MAAM,AACtB,CAAC,AAED,uBAAS,CAAC,MAAM,cAAC,CAAC,AACd,UAAU,CAAE,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,AAClC,CAAC,AAED,uBAAS,CAAC,KAAK,cAAC,CAAC,AACb,OAAO,CAAE,IAAI,AACjB,CAAC,AAEO,iCAAiC,AAAE,CAAC,AACxC,YAAY,CAAE,GAAG,CAAC,KAAK,CAAC,IAAI,AAChC,CAAC;ACwBD,YAAY,8BAAC,CAAC,AACV,UAAU,CAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC;QACxC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC;QACnC,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;QAClC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CACnC,OAAO,CAAE,OAAO,CAChB,aAAa,CAAE,OAAO,CACtB,MAAM,CAAE,KAAK,CAAC,CAAC,AACnB,CAAC,AACD,2BAAY,CAAC,KAAK,eAAC,CAAC,AAChB,WAAW,CAAE,IAAI,CACjB,OAAO,CAAE,KAAK,CACd,UAAU,CAAE,IAAI,AACpB,CAAC,AACD,2BAAY,CAAC,oBAAK,CAAE,2BAAY,CAAC,EAAE,eAAC,CAAC,AACjC,SAAS,CAAE,KAAK,AACpB,CAAC,AACD,2BAAY,CAAC,iBAAE,KAAK,WAAW,CAAC,AAAC,CAAC,AAC9B,aAAa,CAAE,IAAI,AACvB,CAAC,AAED,SAAS,8BAAC,CAAC,AACP,OAAO,CAAE,KAAK,CACd,aAAa,CAAE,OAAO,CACtB,UAAU,CAAE,IAAI,CAChB,UAAU,CAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC;QACxC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC;QACnC,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;QAClC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,AACvC,CAAC,AAED,wBAAS,CAAC,OAAO,eAAC,CAAC,AACf,KAAK,CAAE,mBAAmB,CAC1B,UAAU,CAAE,MAAM,AACtB,CAAC,AAED,wBAAS,CAAC,OAAO,eAAC,CAAC,AACf,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CAChC,cAAc,CAAE,KAAK,CACrB,WAAW,CAAE,KAAK,AACtB,CAAC,AAED,wBAAS,CAAC,OAAO,CAAC,OAAO,eAAC,CAAC,AACvB,SAAS,CAAE,MAAM,AACrB,CAAC,AAED,wBAAS,CAAC,OAAO,CAAC,QAAQ,eAAC,CAAC,AACxB,KAAK,CAAE,IAAI,AACf,CAAC,AAED,wBAAS,CAAC,KAAK,CAAC,OAAO,eAAC,CAAC,AACrB,OAAO,CAAE,IAAI,CAAC,CAAC,CACf,YAAY,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CAC/B,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,AACpC,CAAC,AAED,wBAAS,CAAC,KAAK,CAAC,IAAI,eAAC,CAAC,AAClB,SAAS,CAAE,MAAM,CACjB,UAAU,CAAE,KAAK,CACjB,OAAO,CAAE,KAAK,AAClB,CAAC,AAED,wBAAS,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,eAAC,CAAC,AACxB,SAAS,CAAE,IAAI,CACf,KAAK,CAAE,OAAO,AAClB,CAAC,AAED,wBAAS,CAAC,KAAK,CAAC,OAAO,eAAC,CAAC,AACrB,UAAU,CAAE,OAAO,CACnB,UAAU,CAAE,KAAK,AACrB,CAAC,AACD,wBAAS,CAAC,MAAM,eAAC,CAAC,AACd,UAAU,CAAE,OAAO,CACnB,OAAO,CAAE,IAAI,CAAC,CAAC,CACf,UAAU,CAAE,MAAM,AACtB,CAAC,AAED,wBAAS,CAAC,eAAe,eAAC,CAAC,AACvB,OAAO,CAAE,KAAK,CACd,SAAS,CAAE,KAAK,CAChB,KAAK,CAAE,OAAO,CACd,MAAM,CAAE,OAAO,CACf,UAAU,CAAE,IAAI,CAChB,OAAO,CAAE,KAAK,CACd,UAAU,CAAE,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAC9B,aAAa,CAAE,OAAO,AAC1B,CAAC,AACD,wBAAS,CAAC,IAAI,8BAAe,MAAM,AAAC,CAAC,AACjC,UAAU,CAAE,IAAI,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAC5B,KAAK,CAAE,IAAI,AACf,CAAC;AC/OD,wBAAU,CAAC,KAAK,CAAC,EAAE,CAAC,YAAY,CAAC,cAAC,CAAC,AAC/B,MAAM,CAAE,OAAO,AACnB,CAAC,AACD,wBAAU,CAAC,KAAK,CAAC,EAAE,CAAC,SAAS,eAAC,MAAM,AAAC,CAAC,AAClC,UAAU,CAAE,IAAI,CAAC,UAAU,AAC/B,CAAC;ACyED,YAAY,4BAAC,CAAC,AACV,SAAS,CAAE,MAAM,AACrB,CAAC,AACD,2BAAa,CAAC,KAAK,cAAC,CAAC,AACjB,SAAS,CAAE,KAAK,CAChB,WAAW,CAAE,IAAI,AACrB,CAAC;ACrED,EAAE,eAAC,CAAC,AACA,SAAS,CAAE,KAAK,AACpB,CAAC;ACID,EAAE,8BAAC,CAAC,AACA,OAAO,CAAE,KAAK,CACd,SAAS,CAAE,KAAK,CAChB,WAAW,CAAE,IAAI,AACrB,CAAC,AACD,iCAAkB,CAAC,KAAK,eAAC,CAAC,AACtB,OAAO,CAAE,KAAK,CACd,aAAa,CAAE,OAAO,CACtB,UAAU,CAAE,IAAI,CAChB,UAAU,CAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,AACvJ,CAAC;ACGD,aAAa,cAAC,CAAC,AACX,UAAU,CAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC;QACxC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC;QACnC,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;QAClC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CACnC,aAAa,CAAE,OAAO,CACtB,OAAO,CAAE,IAAI,CACb,aAAa,CAAE,IAAI,AACvB,CAAC"
}